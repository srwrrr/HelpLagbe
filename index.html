<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelpLagbe - Find Skilled Technicians</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background: #667eea;
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .lang-switch, .admin-access {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-access {
            background: #dc3545;
        }

        .lang-switch:hover, .admin-access:hover {
            transform: translateY(-2px);
        }

        .lang-switch:hover {
            background: #5a6fd8;
        }

        .admin-access:hover {
            background: #c82333;
        }

        /* Main Content */
        main {
            margin-top: 100px;
            padding: 2rem 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 4rem 0;
            color: white;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            opacity: 0;
            animation: fadeInUp 1s ease 0.3s forwards;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0;
            animation: fadeInUp 1s ease 0.6s forwards;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            opacity: 0;
            animation: fadeInUp 1s ease 0.9s forwards;
        }

        /* Button Styles */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: white;
            color: #667eea;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: #667eea;
            transform: translateY(-3px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: 0.875rem;
        }

        /* Services Section */
        .services {
            background: white;
            margin: 4rem 0;
            padding: 4rem 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .services h2 {
            text-align: center;
            margin-bottom: 3rem;
            font-size: 2.5rem;
            color: #333;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .service-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        /* Auth Section */
        .auth-section {
            background: white;
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .auth-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background: #f8f9fa;
            border-radius: 50px;
            padding: 0.5rem;
            flex-wrap: wrap;
        }

        .auth-tab {
            background: transparent;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin: 0.25rem;
        }

        .auth-tab.active {
            background: #667eea;
            color: white;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        /* Dashboard Styles */
        .dashboard {
            background: white;
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .dashboard-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .dashboard-tab {
            background: #f8f9fa;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .dashboard-tab.active {
            background: #667eea;
            color: white;
        }

        .dashboard-content {
            display: none;
        }

        .dashboard-content.active {
            display: block;
        }

        /* Admin Panel Styles */
        .admin-panel {
            background: white;
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h1 {
            font-size: 2rem;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 0.5rem;
        }

        .admin-nav {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .admin-nav-tabs {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .admin-nav-tab {
            background: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .admin-nav-tab.active {
            background: #667eea;
            color: white;
        }

        /* Table Styles */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .table tr:hover {
            background: #f8f9fa;
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background: #d1edff;
            color: #0c5460;
        }

        .status-accepted {
            background: #d4edda;
            color: #155724;
        }

        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        /* Post and Task Cards */
        .post-card, .task-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }

        /* Loading and Error States */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #dee2e6;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #28a745;
            color: white;
            border-radius: 10px;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
        }

        .notification.error {
            background: #dc3545;
        }

        /* Floating Chat */
        .floating-chat {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #667eea;
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
            font-size: 1.5rem;
        }

        .floating-chat:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Mobile Responsive */
        .mobile-menu {
            display: none;
            background: white;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                flex-direction: column;
                padding: 1rem;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            .nav-links.active {
                display: flex;
            }

            .mobile-menu {
                display: block;
            }

            .nav-controls {
                gap: 0.5rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .service-grid {
                grid-template-columns: 1fr;
            }

            nav {
                padding: 1rem;
            }

            .auth-tabs {
                flex-direction: column;
            }

            .dashboard-nav {
                flex-direction: column;
            }

            .admin-stats {
                grid-template-columns: 1fr;
            }

            .admin-nav-tabs {
                flex-direction: column;
            }

            .table {
                font-size: 0.875rem;
            }

            .table th,
            .table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">HelpLagbe</div>
            <ul class="nav-links" id="navLinks">
                <li><a onclick="showSection('home')">Home</a></li>
                <li><a onclick="showSection('services')">Services</a></li>
                <li><a onclick="showSection('auth')" id="authNavLink">Login</a></li>
                <li><a onclick="showSection('dashboard')" id="dashboardNavLink" style="display: none;">Dashboard</a></li>
            </ul>
            <div class="nav-controls">
                <button class="admin-access" onclick="showAdminPanel()" id="adminAccessBtn">Admin</button>
                <button class="lang-switch" onclick="toggleLanguage()">à¦¬à¦¾à¦‚à¦²à¦¾</button>
                <button class="mobile-menu" onclick="toggleMobileMenu()">â˜°</button>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <!-- Home Section -->
            <section id="home" class="section active">
                <div class="hero">
                    <h1 id="heroTitle">Find Expert Technicians</h1>
                    <p id="heroSubtitle">Connect with skilled professionals for all your repair and maintenance needs</p>
                    <div class="cta-buttons">
                        <button class="btn btn-primary" onclick="showSection('auth')" id="getStartedBtn">Get Started</button>
                        <button class="btn btn-secondary" onclick="showSection('services')" id="browseServicesBtn">Browse Services</button>
                    </div>
                </div>

                <div class="services">
                    <h2 id="servicesTitle">Our Services</h2>
                    <div class="service-grid">
                        <div class="service-card">
                            <div class="service-icon">ðŸ”§</div>
                            <h3 id="applianceTitle">Appliance Repair</h3>
                            <p id="applianceDesc">Fix your home appliances with certified technicians</p>
                        </div>
                        <div class="service-card">
                            <div class="service-icon">âš¡</div>
                            <h3 id="electricalTitle">Electrical Work</h3>
                            <p id="electricalDesc">Professional electrical installation and repair services</p>
                        </div>
                        <div class="service-card">
                            <div class="service-icon">ðŸ”¨</div>
                            <h3 id="maintenanceTitle">General Maintenance</h3>
                            <p id="maintenanceDesc">Complete home and office maintenance solutions</p>
                        </div>
                        <div class="service-card">
                            <div class="service-icon">ðŸš¿</div>
                            <h3 id="plumbingTitle">Plumbing</h3>
                            <p id="plumbingDesc">Expert plumbing services for your water systems</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Services Section -->
            <section id="services" class="section">
                <div class="services">
                    <h2 id="servicesPageTitle">Available Services</h2>
                    <div class="service-grid">
                        <div class="service-card" onclick="createServiceRequest('appliance')">
                            <div class="service-icon">ðŸ”§</div>
                            <h3>Appliance Repair</h3>
                            <p>Refrigerators, ACs, Washing Machines, Microwaves</p>
                            <button class="btn btn-primary">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('electrical')">
                            <div class="service-icon">âš¡</div>
                            <h3>Electrical Work</h3>
                            <p>Wiring, Outlets, Switches, Circuit Breakers</p>
                            <button class="btn btn-primary">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('plumbing')">
                            <div class="service-icon">ðŸš¿</div>
                            <h3>Plumbing</h3>
                            <p>Pipes, Faucets, Toilets, Water Heaters</p>
                            <button class="btn btn-primary">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('maintenance')">
                            <div class="service-icon">ðŸ”¨</div>
                            <h3>General Maintenance</h3>
                            <p>Carpentry, Painting, Cleaning, Repairs</p>
                            <button class="btn btn-primary">Request Service</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Section -->
            <section id="auth" class="section">
                <div class="auth-section">
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="showAuthTab('login')" id="loginTab">Login</button>
                        <button class="auth-tab" onclick="showAuthTab('register')" id="registerTab">Register</button>
                        <button class="auth-tab" onclick="showAuthTab('technician')" id="technicianTab">Join as Technician</button>
                    </div>

                    <!-- Login Form -->
                    <div id="login-form" class="auth-form active">
                        <form onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label id="emailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="passwordLabel">Password</label>
                                <input type="password" name="password" required>
                            </div>
                            <button type="submit" class="btn btn-primary" id="loginBtn">Login</button>
                        </form>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" class="auth-form">
                        <form onsubmit="handleRegister(event)">
                            <div class="form-group">
                                <label id="usernameLabel">Username</label>
                                <input type="text" name="username" required>
                            </div>
                            <div class="form-group">
                                <label id="regEmailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="phoneLabel">Phone</label>
                                <input type="tel" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label id="regPasswordLabel">Password</label>
                                <input type="password" name="password" required>
                            </div>
                            <div class="form-group">
                                <label id="addressLabel">Address</label>
                                <textarea name="address" rows="3" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" id="registerBtn">Register</button>
                        </form>
                    </div>

                    <!-- Technician Form -->
                    <div id="technician-form" class="auth-form">
                        <form onsubmit="handleTechnicianRegister(event)">
                            <div class="form-group">
                                <label id="fullNameLabel">Full Name</label>
                                <input type="text" name="fullName" required>
                            </div>
                            <div class="form-group">
                                <label id="nationalIdLabel">National ID</label>
                                <input type="text" name="nationalId" required>
                            </div>
                            <div class="form-group">
                                <label id="techEmailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="techPhoneLabel">Phone</label>
                                <input type="tel" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label id="skillsLabel">Skills</label>
                                <textarea name="skills" rows="4" placeholder="Describe your technical skills and experience" required></textarea>
                            </div>
                            <div class="form-group">
                                <label id="documentsLabel">Required Documents</label>
                                <input type="file" name="documents" multiple accept=".pdf,.jpg,.png">
                            </div>
                            <button type="submit" class="btn btn-primary" id="applyBtn">Apply as Technician</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboard" class="section">
                <div class="dashboard">
                    <div class="dashboard-nav">
                        <button class="dashboard-tab active" onclick="showDashboardTab('posts')" id="postsTab">My Posts</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('tasks')" id="tasksTab">Tasks</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('create')" id="createTab">Create Post</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('profile')" id="profileTab">Profile</button>
                    </div>

                    <!-- Posts Tab -->
                    <div id="posts-content" class="dashboard-content active">
                        <h3 id="yourPostsTitle">Your Posts</h3>
                        <div id="posts-container">
                            <div class="loading">Loading posts...</div>
                        </div>
                    </div>

                    <!-- Tasks Tab -->
                    <div id="tasks-content" class="dashboard-content">
                        <h3 id="availableTasksTitle">Available Tasks</h3>
                        <div id="tasks-container">
                            <div class="loading">Loading tasks...</div>
                        </div>
                    </div>

                    <!-- Create Post Tab -->
                    <div id="create-content" class="dashboard-content">
                        <h3 id="createNewPostTitle">Create New Post</h3>
                        <form onsubmit="handleCreatePost(event)">
                            <div class="form-group">
                                <label id="categoryLabel">Service Category</label>
                                <select name="category" required>
                                    <option value="">Select Category</option>
                                    <option value="appliance">Appliance Repair</option>
                                    <option value="electrical">Electrical Work</option>
                                    <option value="plumbing">Plumbing</option>
                                    <option value="maintenance">General Maintenance</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label id="descriptionLabel">Problem Description</label>
                                <textarea name="description" rows="4" placeholder="Describe your problem in detail" required></textarea>
                            </div>
                            <div class="form-group">
                                <label id="imagesLabel">Upload Images</label>
                                <input type="file" name="images" multiple accept="image/*">
                            </div>
                            <button type="submit" class="btn btn-primary" id="postRequestBtn">Post Request</button>
                        </form>
                    </div>

                    <!-- Profile Tab -->
                    <div id="profile-content" class="dashboard-content">
                        <h3 id="profileSettingsTitle">Profile Settings</h3>
                        <form onsubmit="handleProfileUpdate(event)" id="profile-form">
                            <div class="form-group">
                                <label id="profileUsernameLabel">Username</label>
                                <input type="text" name="username" required>
                            </div>
                            <div class="form-group">
                                <label id="profileEmailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="profilePhoneLabel">Phone</label>
                                <input type="tel" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label id="profileAddressLabel">Address</label>
                                <textarea name="address" rows="3" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" id="updateProfileBtn">Update Profile</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Admin Panel Section -->
            <section id="admin-panel" class="section">
                <div class="admin-panel">
                    <!-- Admin Login -->
                    <div id="admin-login" class="admin-section active">
                        <div class="auth-section" style="max-width: 400px; margin: 0 auto;">
                            <h2 style="text-align: center; margin-bottom: 2rem; color: #667eea;">Admin Login</h2>
                            <form onsubmit="handleAdminLogin(event)">
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" name="username" required>
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" name="password" required>
                                </div>
                                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                            </form>
                            <div style="margin-top: 1rem; text-align: center; color: #666; font-size: 0.9rem;">
                                Demo credentials: admin / admin123
                            </div>
                        </div>
                    </div>

                    <!-- Admin Dashboard -->
                    <div id="admin-dashboard" class="admin-section">
                        <div class="admin-header">
                            <h1>HelpLagbe Admin Dashboard</h1>
                            <div>
                                <span id="admin-username">Admin</span>
                                <button class="btn btn-secondary btn-sm" onclick="adminLogout()" style="margin-left: 1rem;">Logout</button>
                            </div>
                        </div>

                        <!-- Admin Stats -->
                        <div class="admin-stats" id="admin-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="total-users">0</div>
                                <div class="stat-label">Total Users</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-technicians">0</div>
                                <div class="stat-label">Total Technicians</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-posts">0</div>
                                <div class="stat-label">Total Posts</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-tasks">0</div>
                                <div class="stat-label">Total Tasks</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="completed-tasks">0</div>
                                <div class="stat-label">Completed Tasks</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="pending-tasks">0</div>
                                <div class="stat-label">Pending Tasks</div>
                            </div>
                        </div>

                        <!-- Admin Navigation -->
                        <div class="admin-nav">
                            <div class="admin-nav-tabs">
                                <button class="admin-nav-tab active" onclick="showAdminTab('overview')" id="overview-tab">Overview</button>
                                <button class="admin-nav-tab" onclick="showAdminTab('users')" id="users-tab">Users</button>
                                <button class="admin-nav-tab" onclick="showAdminTab('technicians')" id="technicians-tab">Technicians</button>
                                <button class="admin-nav-tab" onclick="showAdminTab('admin-posts')" id="admin-posts-tab">Posts</button>
                                <button class="admin-nav-tab" onclick="showAdminTab('admin-tasks')" id="admin-tasks-tab">Tasks</button>
                            </div>
                        </div>

                        <!-- Admin Content Areas -->
                        <div id="admin-overview-content" class="admin-content active">
                            <h3>System Overview</h3>
                            <div class="admin-stats">
                                <div class="stat-card">
                                    <div class="stat-number">95%</div>
                                    <div class="stat-label">System Uptime</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">24</div>
                                    <div class="stat-label">Active Sessions</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">12</div>
                                    <div class="stat-label">Tasks Today</div>
                                </div>
                            </div>
                            <div style="margin-top: 2rem;">
                                <h4>Recent Activities</h4>
                                <div id="recent-activities">
                                    <div class="post-card">
                                        <p><strong>New user registration:</strong> john@example.com</p>
                                        <small>2 minutes ago</small>
                                    </div>
                                    <div class="post-card">
                                        <p><strong>Task completed:</strong> Electrical repair in Dhaka</p>
                                        <small>15 minutes ago</small>
                                    </div>
                                    <div class="post-card">
                                        <p><strong>New technician application:</strong> Ahmed Rahman</p>
                                        <small>1 hour ago</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="admin-users-content" class="admin-content">
                            <h3>All Users</h3>
                            <div id="admin-users-container">
                                <div class="loading">Loading users...</div>
                            </div>
                        </div>

                        <div id="admin-technicians-content" class="admin-content">
                            <h3>All Technicians</h3>
                            <div id="admin-technicians-container">
                                <div class="loading">Loading technicians...</div>
                            </div>
                        </div>

                        <div id="admin-posts-content" class="admin-content">
                            <h3>All Posts</h3>
                            <div id="admin-posts-container">
                                <div class="loading">Loading posts...</div>
                            </div>
                        </div>

                        <div id="admin-tasks-content" class="admin-content">
                            <h3>All Tasks</h3>
                            <div id="admin-tasks-container">
                                <div class="loading">Loading tasks...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal for User Details -->
    <div id="user-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>User Details</h3>
                <button class="close-btn" onclick="closeUserModal()">&times;</button>
            </div>
            <div id="user-modal-content">
                <div class="loading">Loading user details...</div>
            </div>
        </div>
    </div>

    <!-- Modal for Bid Details -->
    <div id="bid-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Bid Details</h3>
                <button class="close-btn" onclick="closeBidModal()">&times;</button>
            </div>
            <div id="bid-modal-content">
                <div class="loading">Loading bid details...</div>
            </div>
        </div>
    </div>

    <button class="floating-chat" onclick="toggleChat()" title="Customer Support">ðŸ’¬</button>

    <script>
        // Configuration
        const API_BASE_URL = '/helplagbe/api'; // Adjust this to your API path
        let currentLanguage = 'en';
        let isLoggedIn = false;
        let isAdminLoggedIn = false;
        let userData = {};
        let adminData = {};

        // Language translations
        const translations = {
            en: {
                heroTitle: "Find Expert Technicians",
                heroSubtitle: "Connect with skilled professionals for all your repair and maintenance needs",
                getStartedBtn: "Get Started",
                browseServicesBtn: "Browse Services",
                servicesTitle: "Our Services",
                servicesPageTitle: "Available Services",
                applianceTitle: "Appliance Repair",
                applianceDesc: "Fix your home appliances with certified technicians",
                electricalTitle: "Electrical Work",
                electricalDesc: "Professional electrical installation and repair services",
                maintenanceTitle: "General Maintenance",
                maintenanceDesc: "Complete home and office maintenance solutions",
                plumbingTitle: "Plumbing",
                plumbingDesc: "Expert plumbing services for your water systems",
                loginTab: "Login",
                registerTab: "Register",
                technicianTab: "Join as Technician",
                emailLabel: "Email",
                passwordLabel: "Password",
                loginBtn: "Login",
                usernameLabel: "Username",
                phoneLabel: "Phone",
                addressLabel: "Address",
                registerBtn: "Register",
                fullNameLabel: "Full Name",
                nationalIdLabel: "National ID",
                skillsLabel: "Skills",
                documentsLabel: "Required Documents",
                applyBtn: "Apply as Technician",
                postsTab: "My Posts",
                tasksTab: "Tasks",
                createTab: "Create Post",
                profileTab: "Profile",
                yourPostsTitle: "Your Posts",
                availableTasksTitle: "Available Tasks",
                createNewPostTitle: "Create New Post",
                profileSettingsTitle: "Profile Settings",
                categoryLabel: "Service Category",
                descriptionLabel: "Problem Description",
                imagesLabel: "Upload Images",
                postRequestBtn: "Post Request",
                updateProfileBtn: "Update Profile"
            },
            bn: {
                heroTitle: "à¦¦à¦•à§à¦· à¦•à¦¾à¦°à¦¿à¦—à¦° à¦–à§à¦à¦œà§à¦¨",
                heroSubtitle: "à¦†à¦ªà¦¨à¦¾à¦° à¦¸à¦•à¦² à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦“ à¦°à¦•à§à¦·à¦£à¦¾à¦¬à§‡à¦•à§à¦·à¦£à§‡à¦° à¦œà¦¨à§à¦¯ à¦¦à¦•à§à¦· à¦ªà§‡à¦¶à¦¾à¦¦à¦¾à¦°à¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— à¦•à¦°à§à¦¨",
                getStartedBtn: "à¦¶à§à¦°à§ à¦•à¦°à§à¦¨",
                browseServicesBtn: "à¦¸à§‡à¦¬à¦¾ à¦¦à§‡à¦–à§à¦¨",
                servicesTitle: "à¦†à¦®à¦¾à¦¦à§‡à¦° à¦¸à§‡à¦¬à¦¾",
                servicesPageTitle: "à¦‰à¦ªà¦²à¦¬à§à¦§ à¦¸à§‡à¦¬à¦¾",
                applianceTitle: "à¦¯à¦¨à§à¦¤à§à¦° à¦®à§‡à¦°à¦¾à¦®à¦¤",
                applianceDesc: "à¦ªà§à¦°à¦¤à§à¦¯à¦¯à¦¼à¦¿à¦¤ à¦•à¦¾à¦°à¦¿à¦—à¦°à¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦˜à¦°à§‡à¦° à¦¯à¦¨à§à¦¤à§à¦° à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦•à¦°à§à¦¨",
                electricalTitle: "à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦•à¦¾à¦œ",
                electricalDesc: "à¦ªà§‡à¦¶à¦¾à¦¦à¦¾à¦° à¦¬à§ˆà¦¦à§à¦¯à§à¦¤à¦¿à¦• à¦¸à§à¦¥à¦¾à¦ªà¦¨à¦¾ à¦“ à¦®à§‡à¦°à¦¾à¦®à¦¤ à¦¸à§‡à¦¬à¦¾",
                maintenanceTitle: "à¦¸à¦¾à¦§à¦¾à¦°à¦£ à¦°à¦•à§à¦·à¦£à¦¾à¦¬à§‡à¦•à§à¦·à¦£",
                maintenanceDesc: "à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦¬à¦¾à¦¡à¦¼à¦¿ à¦“ à¦…à¦«à¦¿à¦¸ à¦°à¦•à§à¦·à¦£à¦¾à¦¬à§‡à¦•à§à¦·à¦£ à¦¸à¦®à¦¾à¦§à¦¾à¦¨",
                plumbingTitle: "à¦¨à¦²à¦¸à¦¾à¦œà¦¿",
                plumbingDesc: "à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦¾à¦¨à¦¿ à¦¬à§à¦¯à¦¬à¦¸à§à¦¥à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¬à¦¿à¦¶à§‡à¦·à¦œà§à¦ž à¦¨à¦²à¦¸à¦¾à¦œà¦¿ à¦¸à§‡à¦¬à¦¾",
                loginTab: "à¦²à¦—à¦‡à¦¨",
                registerTab: "à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà¦¾à¦°",
                technicianTab: "à¦•à¦¾à¦°à¦¿à¦—à¦° à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦¯à§‹à¦—à¦¦à¦¾à¦¨",
                emailLabel: "à¦‡à¦®à§‡à¦‡à¦²",
                passwordLabel: "à¦ªà¦¾à¦¸à¦“à¦¯à¦¼à¦¾à¦°à§à¦¡",
                loginBtn: "à¦²à¦—à¦‡à¦¨",
                usernameLabel: "à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦•à¦¾à¦°à§€à¦° à¦¨à¦¾à¦®",
                phoneLabel: "à¦«à§‹à¦¨",
                addressLabel: "à¦ à¦¿à¦•à¦¾à¦¨à¦¾",
                registerBtn: "à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà¦¾à¦°",
                fullNameLabel: "à¦ªà§‚à¦°à§à¦£ à¦¨à¦¾à¦®",
                nationalIdLabel: "à¦œà¦¾à¦¤à§€à¦¯à¦¼ à¦ªà¦°à¦¿à¦šà¦¯à¦¼à¦ªà¦¤à§à¦°",
                skillsLabel: "à¦¦à¦•à§à¦·à¦¤à¦¾",
                documentsLabel: "à¦•à¦¾à¦—à¦œà¦ªà¦¤à§à¦°",
                applyBtn: "à¦•à¦¾à¦°à¦¿à¦—à¦° à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦†à¦¬à§‡à¦¦à¦¨",
                postsTab: "à¦†à¦®à¦¾à¦° à¦ªà§‹à¦¸à§à¦Ÿ",
                tasksTab: "à¦•à¦¾à¦œ",
                createTab: "à¦ªà§‹à¦¸à§à¦Ÿ à¦¤à§ˆà¦°à¦¿",
                profileTab: "à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦²",
                yourPostsTitle: "à¦†à¦ªà¦¨à¦¾à¦° à¦ªà§‹à¦¸à§à¦Ÿ",
                availableTasksTitle: "à¦‰à¦ªà¦²à¦¬à§à¦§ à¦•à¦¾à¦œ",
                createNewPostTitle: "à¦¨à¦¤à§à¦¨ à¦ªà§‹à¦¸à§à¦Ÿ à¦¤à§ˆà¦°à¦¿",
                profileSettingsTitle: "à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸",
                categoryLabel: "à¦¸à§‡à¦¬à¦¾à¦° à¦§à¦°à¦¨",
                descriptionLabel: "à¦¸à¦®à¦¸à§à¦¯à¦¾à¦° à¦¬à¦¿à¦¬à¦°à¦£",
                imagesLabel: "à¦›à¦¬à¦¿ à¦†à¦ªà¦²à§‹à¦¡",
                postRequestBtn: "à¦…à¦¨à§à¦°à§‹à¦§ à¦ªà§‹à¦¸à§à¦Ÿ à¦•à¦°à§à¦¨",
                updateProfileBtn: "à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦†à¦ªà¦¡à§‡à¦Ÿ"
            }
        };

        // API Helper Functions
        async function apiCall(endpoint, method = 'GET', data = null) {
            try {
                // For demo purposes, simulate API calls with mock data
                console.log('API Call:', endpoint, method, data);
                
                // Simulate network delay
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Mock API responses
                if (endpoint.includes('auth.php')) {
                    if (data?.action === 'login') {
                        if (data.email === 'demo@example.com' && data.password === 'demo123') {
                            return { success: true, data: { user_id: 1, username: 'demo_user', email: 'demo@example.com', is_technician: 0 } };
                        } else {
                            return { success: false, message: 'Invalid credentials' };
                        }
                    }
                    if (data?.action === 'register') {
                        return { success: true, data: { user_id: Date.now(), username: data.username, email: data.email, is_technician: 0 } };
                    }
                    if (data?.action === 'technician_register') {
                        return { success: true, message: 'Application submitted successfully' };
                    }
                }
                
                // Mock admin API responses
                if (endpoint.includes('admin.php')) {
                    if (data?.action === 'admin_login') {
                        if (data.username === 'admin' && data.password === 'admin123') {
                            return { success: true, data: { username: 'admin', role: 'admin' } };
                        } else {
                            return { success: false, message: 'Invalid admin credentials' };
                        }
                    }
                    
                    if (endpoint.includes('dashboard_stats')) {
                        return {
                            success: true,
                            data: {
                                total_users: mockData.users.length,
                                total_technicians: mockData.technicians.length,
                                total_posts: mockData.posts.length,
                                total_tasks: mockData.tasks.length,
                                completed_tasks: mockData.tasks.filter(t => t.task_status === 'completed').length,
                                pending_tasks: mockData.tasks.filter(t => t.task_status === 'pending').length
                            }
                        };
                    }
                    
                    if (endpoint.includes('all_users')) {
                        return { success: true, data: mockData.users };
                    }
                    
                    if (endpoint.includes('all_technicians')) {
                        return { success: true, data: mockData.technicians };
                    }
                    
                    if (endpoint.includes('all_posts')) {
                        return { success: true, data: mockData.posts };
                    }
                    
                    if (endpoint.includes('all_tasks')) {
                        return { success: true, data: mockData.tasks };
                    }
                }
                
                // Mock posts API responses
                if (endpoint.includes('posts.php')) {
                    if (endpoint.includes('user_posts')) {
                        return { success: true, data: mockData.posts.slice(0, 2) };
                    }
                    if (endpoint.includes('available_tasks')) {
                        return { success: true, data: mockData.posts };
                    }
                    if (endpoint.includes('post_bids')) {
                        return { success: true, data: mockData.bids };
                    }
                    if (data?.action === 'create_post') {
                        return { success: true, message: 'Post created successfully' };
                    }
                    if (data?.action === 'submit_bid') {
                        return { success: true, message: 'Bid submitted successfully' };
                    }
                    if (data?.action === 'accept_bid') {
                        return { success: true, message: 'Bid accepted successfully' };
                    }
                }
                
                return { success: false, message: 'API endpoint not found' };
            } catch (error) {
                console.error('API call error:', error);
                return { success: false, message: 'Network error' };
            }
        }

        // Language switching
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'bn' : 'en';
            updateLanguage();
        }

        function updateLanguage() {
            const langBtn = document.querySelector('.lang-switch');
            langBtn.textContent = currentLanguage === 'en' ? 'à¦¬à¦¾à¦‚à¦²à¦¾' : 'English';

            // Update all text elements
            Object.keys(translations[currentLanguage]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Show requested section
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Handle auth/dashboard logic
            if (sectionName === 'auth' && isLoggedIn) {
                showSection('dashboard');
                return;
            }
            if (sectionName === 'dashboard' && !isLoggedIn) {
                showSection('auth');
                return;
            }

            // Load data for dashboard sections
            if (sectionName === 'dashboard' && isLoggedIn) {
                loadUserPosts();
                loadAvailableTasks();
            }

            // Update navigation
            updateNavigation();
        }

        function updateNavigation() {
            const authNavLink = document.getElementById('authNavLink');
            const dashboardNavLink = document.getElementById('dashboardNavLink');
            
            if (isLoggedIn) {
                authNavLink.textContent = currentLanguage === 'en' ? 'Logout' : 'à¦²à¦—à¦†à¦‰à¦Ÿ';
                authNavLink.onclick = logout;
                dashboardNavLink.style.display = 'block';
            } else {
                authNavLink.textContent = currentLanguage === 'en' ? 'Login' : 'à¦²à¦—à¦‡à¦¨';
                authNavLink.onclick = () => showSection('auth');
                dashboardNavLink.style.display = 'none';
            }
        }

        // Admin panel functions
        function showAdminPanel() {
            if (isAdminLoggedIn) {
                showSection('admin-panel');
                showAdminSection('admin-dashboard');
                loadAdminStats();
            } else {
                showSection('admin-panel');
                showAdminSection('admin-login');
            }
        }

        function showAdminSection(sectionName) {
            const adminSections = document.querySelectorAll('.admin-section');
            adminSections.forEach(section => {
                section.classList.remove('active');
            });

            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }

        async function handleAdminLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                action: 'admin_login',
                username: formData.get('username'),
                password: formData.get('password')
            };

            try {
                const result = await apiCall('/admin.php', 'POST', data);
                
                if (result.success) {
                    isAdminLoggedIn = true;
                    adminData = result.data;
                    document.getElementById('admin-username').textContent = result.data.username;
                    showAdminSection('admin-dashboard');
                    loadAdminStats();
                    showNotification('Admin login successful!');
                } else {
                    showNotification(result.message, 'error');
                }
            } catch (error) {
                showNotification('Login failed: ' + error.message, 'error');
            }
        }

        function adminLogout() {
            isAdminLoggedIn = false;
            adminData = {};
            showSection('home');
            showNotification('Admin logged out successfully');
        }

        async function loadAdminStats() {
            try {
                const result = await apiCall('/admin.php?action=dashboard_stats');
                
                if (result.success) {
                    const stats = result.data;
                    document.getElementById('total-users').textContent = stats.total_users;
                    document.getElementById('total-technicians').textContent = stats.total_technicians;
                    document.getElementById('total-posts').textContent = stats.total_posts;
                    document.getElementById('total-tasks').textContent = stats.total_tasks;
                    document.getElementById('completed-tasks').textContent = stats.completed_tasks;
                    document.getElementById('pending-tasks').textContent = stats.pending_tasks;
                }
            } catch (error) {
                console.error('Failed to load admin stats:', error);
            }
        }

        function showAdminTab(tabName) {
            // Update tab buttons
            const tabs = document.querySelectorAll('.admin-nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(`${tabName === 'overview' ? 'overview' : tabName}-tab`).classList.add('active');

            // Show tab content
            const contents = document.querySelectorAll('.admin-content');
            contents.forEach(content => content.classList.remove('active'));
            document.getElementById(`admin-${tabName}-content`).classList.add('active');

            // Load data for the tab
            switch (tabName) {
                case 'users':
                    loadAdminUsers();
                    break;
                case 'technicians':
                    loadAdminTechnicians();
                    break;
                case 'admin-posts':
                    loadAdminPosts();
                    break;
                case 'admin-tasks':
                    loadAdminTasks();
                    break;
            }
        }

        // Admin data loading functions
        async function loadAdminUsers() {
            const container = document.getElementById('admin-users-container');
            container.innerHTML = '<div class="loading">Loading users...</div>';

            try {
                const result = await apiCall('/admin.php?action=all_users');
                
                if (result.success) {
                    const users = result.data;
                    
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Posts</th>
                                    <th>Type</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${users.map(user => `
                                    <tr>
                                        <td>${user.user_id}</td>
                                        <td>${user.username}</td>
                                        <td>${user.email}</td>
                                        <td>${user.phone_no || 'N/A'}</td>
                                        <td>${user.post_count}</td>
                                        <td>
                                            <span class="status-badge ${user.is_technician > 0 ? 'status-accepted' : 'status-pending'}">
                                                ${user.is_technician > 0 ? 'Technician' : 'Customer'}
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewUserDetails(${user.user_id})">
                                                View Details
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = `<div class="error">Error: ${result.message}</div>`;
                }
            } catch (error) {
                container.innerHTML = `<div class="error">Network error: ${error.message}</div>`;
            }
        }

        async function loadAdminTechnicians() {
            const container = document.getElementById('admin-technicians-container');
            container.innerHTML = '<div class="loading">Loading technicians...</div>';

            try {
                const result = await apiCall('/admin.php?action=all_technicians');
                
                if (result.success) {
                    const technicians = result.data;
                    
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Skills</th>
                                    <th>Tasks</th>
                                    <th>Completion Rate</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${technicians.map(tech => `
                                    <tr>
                                        <td>${tech.technician_id}</td>
                                        <td>${tech.Full_Name}</td>
                                        <td>${tech.email}</td>
                                        <td>${tech.phone_no || 'N/A'}</td>
                                        <td title="${tech.Skill_details}">${tech.Skill_details.substring(0, 30)}...</td>
                                        <td>${tech.task_count}</td>
                                        <td>
                                            <span class="status-badge ${tech.completion_rate >= 90 ? 'status-accepted' : tech.completion_rate >= 70 ? 'status-pending' : 'status-cancelled'}">
                                                ${Math.round(tech.completion_rate || 0)}%
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewTechnicianDetails(${tech.technician_id})">
                                                View Profile
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = `<div class="error">Error: ${result.message}</div>`;
                }
            } catch (error) {
                container.innerHTML = `<div class="error">Network error: ${error.message}</div>`;
            }
        }

        async function loadAdminPosts() {
            const container = document.getElementById('admin-posts-container');
            container.innerHTML = '<div class="loading">Loading posts...</div>';

            try {
                const result = await apiCall('/admin.php?action=all_posts');
                
                if (result.success) {
                    const posts = result.data;
                    
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Posted By</th>
                                    <th>Category</th>
                                    <th>Description</th>
                                    <th>Bids</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${posts.map(post => `
                                    <tr>
                                        <td>${post.post_id}</td>
                                        <td>${post.posted_by}</td>
                                        <td>
                                            <span class="status-badge status-pending">${post.Category}</span>
                                        </td>
                                        <td title="${post.Post_detail}">${post.Post_detail.substring(0, 40)}...</td>
                                        <td>${post.bid_count}</td>
                                        <td>
                                            <span class="status-badge ${post.is_accepted ? 'status-accepted' : 'status-pending'}">
                                                ${post.is_accepted ? 'Accepted' : 'Open'}
                                            </span>
                                        </td>
                                        <td>${new Date(post.created_at).toLocaleDateString()}</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewPostDetails(${post.post_id})">
                                                View Details
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = `<div class="error">Error: ${result.message}</div>`;
                }
            } catch (error) {
                container.innerHTML = `<div class="error">Network error: ${error.message}</div>`;
            }
        }

        async function loadAdminTasks() {
            const container = document.getElementById('admin-tasks-container');
            container.innerHTML = '<div class="loading">Loading tasks...</div>';

            try {
                const result = await apiCall('/admin.php?action=all_tasks');
                
                if (result.success) {
                    const tasks = result.data;
                    
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Client</th>
                                    <th>Technician</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${tasks.map(task => `
                                    <tr>
                                        <td>${task.task_id}</td>
                                        <td>${task.client_name}</td>
                                        <td>${task.technician_name}</td>
                                        <td>
                                            <span class="status-badge status-pending">${task.Category}</span>
                                        </td>
                                        <td>à§³${task.price}</td>
                                        <td>
                                            <span class="status-badge status-${task.task_status}">
                                                ${task.task_status.charAt(0).toUpperCase() + task.task_status.slice(1)}
                                            </span>
                                        </td>
                                        <td>${new Date(task.created_at).toLocaleDateString()}</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewTaskDetails(${task.task_id})">
                                                Manage
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = `<div class="error">Error: ${result.message}</div>`;
                }
            } catch (error) {
                container.innerHTML = `<div class="error">Network error: ${error.message}</div>`;
            }
        }

        // User authentication functions
        async function logout() {
            const result = await apiCall('/auth.php', 'POST', { action: 'logout' });
            if (result.success || true) { // Always allow logout in demo
                isLoggedIn = false;
                userData = {};
                updateNavigation();
                showSection('home');
                showNotification(currentLanguage === 'en' ? 'Logged out successfully!' : 'à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦²à¦—à¦†à¦‰à¦Ÿ à¦¹à¦¯à¦¼à§‡à¦›à§‡!');
            }
        }

        // Authentication tab switching
        function showAuthTab(tabName) {
            const tabs = document.querySelectorAll('.auth-tab');
            const forms = document.querySelectorAll('.auth-form');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            forms.forEach(form => form.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-form`).classList.add('active');
        }

        // Dashboard tab switching
        function showDashboardTab(tabName) {
            const tabs = document.querySelectorAll('.dashboard-tab');
            const contents = document.querySelectorAll('.dashboard-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-content`).classList.add('active');

            // Load data based on tab
            if (tabName === 'posts') {
                loadUserPosts();
            } else if (tabName === 'tasks') {
                loadAvailableTasks();
            } else if (tabName === 'profile') {
                loadProfileData();
            }
        }

        // Form handlers
        async function handleLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                action: 'login',
                email: formData.get('email'),
                password: formData.get('password')
            };
            
            const result = await apiCall('/auth.php', 'POST', data);
            
            if (result.success) {
                isLoggedIn = true;
                userData = result.data;
                
                showNotification(currentLanguage === 'en' ? 'Login successful!' : 'à¦²à¦—à¦‡à¦¨ à¦¸à¦«à¦²!');
                updateNavigation();
                showSection('dashboard');
            } else {
                showNotification(result.message, 'error');
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                action: 'register',
                username: formData.get('username'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                password: formData.get('password'),
                address: formData.get('address')
            };
            
            const result = await apiCall('/auth.php', 'POST', data);
            
            if (result.success) {
                isLoggedIn = true;
                userData = result.data;
                
                showNotification(currentLanguage === 'en' ? 'Registration successful!' : 'à¦°à§‡à¦œà¦¿à¦¸à§à¦Ÿà§à¦°à§‡à¦¶à¦¨ à¦¸à¦«à¦²!');
                updateNavigation();
                showSection('dashboard');
            } else {
                showNotification(result.message, 'error');
            }
        }

        async function handleTechnicianRegister(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                action: 'technician_register',
                fullName: formData.get('fullName'),
                nationalId: formData.get('nationalId'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                skills: formData.get('skills')
            };
            
            const result = await apiCall('/auth.php', 'POST', data);
            
            if (result.success) {
                showNotification(currentLanguage === 'en' ? 
                    'Technician application submitted! We will review and contact you soon.' : 
                    'à¦•à¦¾à¦°à¦¿à¦—à¦° à¦†à¦¬à§‡à¦¦à¦¨ à¦œà¦®à¦¾ à¦¦à§‡à¦“à¦¯à¦¼à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡! à¦†à¦®à¦°à¦¾ à¦ªà¦°à§à¦¯à¦¾à¦²à§‹à¦šà¦¨à¦¾ à¦•à¦°à§‡ à¦¶à§€à¦˜à§à¦°à¦‡ à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— à¦•à¦°à¦¬à¥¤'
                );
                showAuthTab('login');
            } else {
                showNotification(result.message, 'error');
            }
        }

        async function handleCreatePost(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                action: 'create_post',
                category: formData.get('category'),
                description: formData.get('description'),
                images: formData.get('images') ? 'placeholder.jpg' : '' // Handle file upload properly in production
            };
            
            const result = await apiCall('/posts.php', 'POST', data);
            
            if (result.success) {
                showNotification(currentLanguage === 'en' ? 'Post created successfully!' : 'à¦ªà§‹à¦¸à§à¦Ÿ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦¤à§ˆà¦°à¦¿ à¦¹à¦¯à¦¼à§‡à¦›à§‡!');
                showDashboardTab('posts');
                event.target.reset();
            } else {
                showNotification(result.message, 'error');
            }
        }

        async function handleProfileUpdate(event) {
            event.preventDefault();
            showNotification(currentLanguage === 'en' ? 'Profile updated successfully!' : 'à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦†à¦ªà¦¡à§‡à¦Ÿ à¦¹à¦¯à¦¼à§‡à¦›à§‡!');
        }

        // Data loading functions
        async function loadUserPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = '<div class="loading">Loading posts...</div>';
            
            const result = await apiCall('/posts.php?action=user_posts');
            
            if (result.success) {
                if (result.data.length === 0) {
                    container.innerHTML = '<p>No posts found. Create your first post!</p>';
                } else {
                    container.innerHTML = result.data.map(post => `
                        <div class="post-card">
                            <h4>${post.Post_detail.substring(0, 50)}...</h4>
                            <p><strong>Category:</strong> ${post.Category}</p>
                            <span class="status-badge status-${post.latest_status || 'pending'}">${post.latest_status || 'Pending'}</span>
                            <p><strong>Bids Received:</strong> ${post.bid_count}</p>
                            <div style="margin-top: 1rem;">
                                <button class="btn btn-primary btn-sm" onclick="viewBids(${post.post_id})">View Bids</button>
                                <button class="btn btn-secondary btn-sm" style="margin-left: 0.5rem;" onclick="editPost(${post.post_id})">Edit</button>
                            </div>
                        </div>
                    `).join('');
                }
            } else {
                container.innerHTML = `<div class="error">Error loading posts: ${result.message}</div>`;
            }
        }

        async function loadAvailableTasks() {
            const container = document.getElementById('tasks-container');
            container.innerHTML = '<div class="loading">Loading tasks...</div>';
            
            const result = await apiCall('/posts.php?action=available_tasks');
            
            if (result.success) {
                if (result.data.length === 0) {
                    container.innerHTML = '<p>No tasks available at the moment.</p>';
                } else {
                    container.innerHTML = result.data.map(task => `
                        <div class="task-card">
                            <h4>${task.Post_detail.substring(0, 50)}...</h4>
                            <p><strong>Category:</strong> ${task.Category}</p>
                            <p><strong>Posted by:</strong> ${task.posted_by}</p>
                            <p><strong>Current bids:</strong> ${task.bid_count}</p>
                            <span class="status-badge status-pending">Open for Bids</span>
                            ${userData.is_technician ? `
                                <div class="bid-form" style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                                        <input type="number" id="bid-${task.post_id}" placeholder="Enter your bid amount (à§³)" min="1" style="flex: 1; padding: 0.5rem;">
                                        <button class="btn btn-primary btn-sm" onclick="submitBid(${task.post_id})">Submit Bid</button>
                                    </div>
                                </div>
                            ` : '<p style="margin-top: 1rem;"><em>Register as technician to bid on tasks</em></p>'}
                        </div>
                    `).join('');
                }
            } else {
                container.innerHTML = `<div class="error">Error loading tasks: ${result.message}</div>`;
            }
        }

        function loadProfileData() {
            if (userData) {
                const form = document.getElementById('profile-form');
                const inputs = form.querySelectorAll('input, textarea');
                
                inputs.forEach(input => {
                    const name = input.name;
                    if (userData[name]) {
                        input.value = userData[name];
                    }
                });
            }
        }

        // Task functions
        async function submitBid(postId) {
            const bidInput = document.getElementById(`bid-${postId}`);
            const bidAmount = bidInput.value;
            
            if (!bidAmount || bidAmount <= 0) {
                showNotification('Please enter a valid bid amount', 'error');
                return;
            }
            
            const data = {
                action: 'submit_bid',
                post_id: postId,
                price: bidAmount
            };
            
            const result = await apiCall('/posts.php', 'POST', data);
            
            if (result.success) {
                showNotification(currentLanguage === 'en' ? 
                    `Bid of à§³${bidAmount} submitted successfully!` : 
                    `à§³${bidAmount} à¦¬à¦¿à¦¡ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦œà¦®à¦¾ à¦¦à§‡à¦“à¦¯à¦¼à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡!`
                );
                bidInput.value = '';
                loadAvailableTasks();
            } else {
                showNotification(result.message, 'error');
            }
        }

        async function viewBids(postId) {
            const result = await apiCall(`/posts.php?action=post_bids&post_id=${postId}`);
            
            if (result.success) {
                if (result.data.length === 0) {
                    showNotification('No bids received yet.', 'error');
                } else {
                    showBidModal(result.data, postId);
                }
            } else {
                showNotification(result.message, 'error');
            }
        }

        function showBidModal(bids, postId) {
            const modal = document.getElementById('bid-modal');
            const modalContent = document.getElementById('bid-modal-content');
            
            let bidsHtml = '<div style="max-height: 400px; overflow-y: auto;">';
            bidsHtml += '<h4 style="margin-bottom: 1rem;">Bids for your post:</h4>';
            
            bids.forEach(bid => {
                bidsHtml += `
                    <div style="background: #f8f9fa; padding: 1rem; margin: 0.5rem 0; border-radius: 8px; border-left: 4px solid #667eea;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div style="flex: 1;">
                                <h5 style="margin: 0 0 0.5rem 0; color: #333;">${bid.Full_Name}</h5>
                                <p style="margin: 0; color: #667eea; font-weight: bold; font-size: 1.2rem;">à§³${bid.price}</p>
                                <p style="margin: 0.25rem 0; color: #666;"><strong>Phone:</strong> ${bid.phone_no}</p>
                                <p style="margin: 0.25rem 0; color: #666;"><strong>Skills:</strong> ${bid.Skill_details || 'N/A'}</p>
                                <span class="status-badge status-${bid.task_status}" style="margin-top: 0.5rem;">${bid.task_status.charAt(0).toUpperCase() + bid.task_status.slice(1)}</span>
                            </div>
                            <div style="margin-left: 1rem;">
                                ${bid.task_status === 'pending' ? 
                                    `<button onclick="acceptBid(${bid.task_id}, ${postId})" class="btn btn-success btn-sm">Accept Bid</button>` : 
                                    '<span style="color: #28a745; font-weight: bold; padding: 0.5rem 1rem; background: #d4edda; border-radius: 5px;">ACCEPTED</span>'
                                }
                            </div>
                        </div>
                    </div>
                `;
            });
            bidsHtml += '</div>';
            
            modalContent.innerHTML = bidsHtml;
            modal.style.display = 'flex';
        }

        async function acceptBid(taskId, postId) {
            const result = await apiCall('/posts.php', 'POST', {
                action: 'accept_bid',
                task_id: taskId
            });
            
            if (result.success) {
                showNotification('Bid accepted successfully!');
                closeBidModal();
                loadUserPosts();
            } else {
                showNotification(result.message, 'error');
            }
        }

        // Modal functions
        async function viewUserDetails(userId) {
            const modal = document.getElementById('user-modal');
            const modalContent = document.getElementById('user-modal-content');
            
            modal.style.display = 'flex';
            modalContent.innerHTML = '<div class="loading">Loading user details...</div>';

            // Find user in mock data
            const user = mockData.users.find(u => u.user_id === userId);
            const userPosts = mockData.posts.filter(p => p.posted_by === user?.username);
            
            if (user) {
                modalContent.innerHTML = `
                    <div class="user-info">
                        <h4>User Information</h4>
                        <p><strong>Name:</strong> ${user.username}</p>
                        <p><strong>Email:</strong> ${user.email}</p>
                        <p><strong>Phone:</strong> ${user.phone_no || 'N/A'}</p>
                        <p><strong>Address:</strong> ${user.address || 'N/A'}</p>
                        <p><strong>Total Posts:</strong> ${user.post_count}</p>
                        ${user.is_technician > 0 ? `
                            <p><strong>Technician Name:</strong> ${user.technician_name || 'N/A'}</p>
                            <p><strong>Skills:</strong> ${user.skills || 'N/A'}</p>
                        ` : ''}
                    </div>
                    
                    <div class="user-posts" style="margin-top: 2rem;">
                        <h4>User Posts (${userPosts.length})</h4>
                        ${userPosts.length > 0 ? `
                            <div style="margin-top: 1rem;">
                                ${userPosts.map(post => `
                                    <div class="post-card" style="margin-bottom: 1rem;">
                                        <h5>Category: ${post.Category}</h5>
                                        <p>${post.Post_detail}</p>
                                        <span class="status-badge status-${post.latest_status || 'pending'}">
                                            ${post.latest_status || 'Pending'}
                                        </span>
                                        <p><strong>Bids:</strong> ${post.bid_count}</p>
                                    </div>
                                `).join('')}
                            </div>
                        ` : '<p>No posts found for this user.</p>'}
                    </div>
                `;
            } else {
                modalContent.innerHTML = `<div class="error">User not found</div>`;
            }
        }

        function viewTechnicianDetails(technicianId) {
            showNotification('Technician details would be displayed here');
        }

        function viewPostDetails(postId) {
            showNotification('Post details would be displayed here');
        }

        function viewTaskDetails(taskId) {
            showNotification('Task management options would be displayed here');
        }

        function editPost(postId) {
            showNotification('Post editing functionality would be implemented here');
        }

        function closeUserModal() {
            document.getElementById('user-modal').style.display = 'none';
        }

        function closeBidModal() {
            document.getElementById('bid-modal').style.display = 'none';
        }

        // Service request functions
        function createServiceRequest(category) {
            if (!isLoggedIn) {
                showNotification(currentLanguage === 'en' ? 'Please login to request services' : 'à¦¸à§‡à¦¬à¦¾à¦° à¦œà¦¨à§à¦¯ à¦…à¦¨à§à¦°à§‹à¦§ à¦•à¦°à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨', 'error');
                showSection('auth');
                return;
            }
            
            showSection('dashboard');
            showDashboardTab('create');
            
            // Pre-select category
            const categorySelect = document.querySelector('select[name="category"]');
            if (categorySelect) {
                categorySelect.value = category;
            }
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // Chat function
        function toggleChat() {
            alert(currentLanguage === 'en' ? 
                'Customer support chat would open here.\n\nFor demo purposes:\n- Live chat with support agents\n- FAQ section\n- Help documentation' : 
                'à¦—à§à¦°à¦¾à¦¹à¦• à¦¸à§‡à¦¬à¦¾ à¦šà§à¦¯à¦¾à¦Ÿ à¦à¦–à¦¾à¦¨à§‡ à¦–à§à¦²à¦¬à§‡à¥¤\n\nà¦¡à§‡à¦®à§‹à¦° à¦œà¦¨à§à¦¯:\n- à¦¸à¦¾à¦ªà§‹à¦°à§à¦Ÿ à¦à¦œà§‡à¦¨à§à¦Ÿà¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦²à¦¾à¦‡à¦­ à¦šà§à¦¯à¦¾à¦Ÿ\n- FAQ à¦¬à¦¿à¦­à¦¾à¦—\n- à¦¸à¦¹à¦¾à¦¯à¦¼à¦¤à¦¾ à¦¡à¦•à§à¦®à§‡à¦¨à§à¦Ÿà§‡à¦¶à¦¨'
            );
        }

        // Notification system
        function showNotification(message, type = 'success') {
            // Remove existing notification
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            const notification = document.createElement('div');
            notification.className = `notification ${type === 'error' ? 'error' : ''}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        // Check session on page load
        async function checkSession() {
            // For demo purposes, we'll skip session checking
            // In production, this would call your API to check if user is logged in
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkSession();
            showSection('home');
            updateNavigation();
            
            // Add animation delay to service cards
            const serviceCards = document.querySelectorAll('.service-card');
            serviceCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.2}s`;
                card.style.opacity = '0';
                card.style.animation = 'fadeInUp 0.6s ease forwards';
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                const navLinks = document.getElementById('navLinks');
                const mobileMenu = document.querySelector('.mobile-menu');
                
                if (!navLinks.contains(event.target) && !mobileMenu.contains(event.target)) {
                    navLinks.classList.remove('active');
                }
            });

            // Close modals when clicking outside
            document.getElementById('user-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeUserModal();
                }
            });

            document.getElementById('bid-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeBidModal();
                }
            });
        });

        // Add CSS class for admin content sections
        const style = document.createElement('style');
        style.textContent = `
            .admin-section {
                display: none;
            }
            .admin-section.active {
                display: block;
            }
            .admin-content {
                display: none;
            }
            .admin-content.active {
                display: block;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>