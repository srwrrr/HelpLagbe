<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelpLagbe - Find Skilled Technicians</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff6b35;
            --primary-dark: #e55a2b;
            --secondary-color: #ff8c42;
            --bg-dark: #1a1a1a;
            --bg-darker: #0f0f0f;
            --bg-light: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #999999;
            --border-color: #333333;
            --success-color: #28a745;
            --error-color: #dc3545;
            --warning-color: #ffc107;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-dark);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: var(--bg-darker);
            border-bottom: 2px solid var(--primary-color);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo img {
            height: 40px;
            width: auto;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .logo-tagline {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .nav-links a.active {
            color: var(--primary-color);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after,
        .nav-links a.active::after {
            width: 100%;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        .btn-outline {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .btn-outline:hover {
            background: var(--bg-light);
            color: var(--text-primary);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .lang-switch {
            background: var(--bg-light);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .lang-switch:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Main Content */
        main {
            margin-top: 90px;
            min-height: calc(100vh - 90px - 100px); /* Account for header and footer */
            padding: 2rem 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 4rem 0;
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 100%);
            border-radius: 20px;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--primary-color)20, transparent 70%);
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
            opacity: 0;
            animation: fadeInUp 1s ease 0.3s forwards;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: var(--text-secondary);
            opacity: 0;
            animation: fadeInUp 1s ease 0.6s forwards;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            opacity: 0;
            animation: fadeInUp 1s ease 0.9s forwards;
        }

        /* Services Section */
        .services {
            background: var(--bg-light);
            margin: 4rem 0;
            padding: 4rem 2rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }

        .services h2 {
            text-align: center;
            margin-bottom: 3rem;
            font-size: 2.5rem;
            color: var(--text-primary);
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .service-card {
            background: var(--bg-dark);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--primary-color)20, transparent);
            transition: left 0.6s;
        }

        .service-card:hover::before {
            left: 100%;
        }

        .service-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary-color);
            box-shadow: 0 20px 40px rgba(255, 107, 53, 0.1);
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .service-card h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .service-card p {
            color: var(--text-secondary);
        }

        /* Auth Section */
        .auth-section {
            background: var(--bg-light);
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            max-width: 600px;
            margin: 2rem auto;
        }

        .auth-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background: var(--bg-dark);
            border-radius: 50px;
            padding: 0.5rem;
            flex-wrap: wrap;
            border: 1px solid var(--border-color);
        }

        .auth-tab {
            background: transparent;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin: 0.25rem;
            color: var(--text-secondary);
        }

        .auth-tab.active {
            background: var(--primary-color);
            color: white;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input, 
        .form-group textarea, 
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: var(--bg-dark);
            color: var(--text-primary);
        }

        .form-group input:focus, 
        .form-group textarea:focus, 
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        /* Dashboard Styles */
        .dashboard {
            background: var(--bg-light);
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .dashboard-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .dashboard-tab {
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .dashboard-tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .dashboard-content {
            display: none;
        }

        .dashboard-content.active {
            display: block;
        }

        /* Admin Panel Styles */
        .admin-panel {
            background: var(--bg-light);
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }

        .admin-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-dark);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            border-left: 4px solid var(--primary-color);
            border: 1px solid var(--border-color);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Table Styles */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            background: var(--bg-dark);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .table th {
            background: var(--bg-darker);
            font-weight: 600;
            color: var(--primary-color);
        }

        .table tr:hover {
            background: var(--bg-light);
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }

        .status-completed {
            background: rgba(40, 167, 69, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .status-accepted {
            background: rgba(40, 167, 69, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .status-cancelled {
            background: rgba(220, 53, 69, 0.2);
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        /* Post and Task Cards */
        .post-card, .task-card {
            background: var(--bg-dark);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--primary-color);
        }

        .post-card h4, .task-card h4 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .post-card p, .task-card p {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        /* Loading and Error States */
        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
        }

        .error {
            background: rgba(220, 53, 69, 0.1);
            color: var(--error-color);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border: 1px solid var(--error-color);
        }

        .success {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border: 1px solid var(--success-color);
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--bg-light);
            padding: 2rem;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h3 {
            color: var(--text-primary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--primary-color);
        }

        /* Footer */
        footer {
            background: var(--bg-darker);
            border-top: 2px solid var(--primary-color);
            padding: 2rem 0;
            margin-top: 4rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .footer-section p,
        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            line-height: 1.6;
        }

        .footer-section a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-muted);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--success-color);
            color: white;
            border-radius: 10px;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
            border-left: 4px solid rgba(255, 255, 255, 0.3);
        }

        .notification.error {
            background: var(--error-color);
        }

        /* Floating Chat */
        .floating-chat {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--primary-color);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            font-size: 1.5rem;
        }

        .floating-chat:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.4);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Mobile Responsive */
        .mobile-menu {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-primary);
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--bg-darker);
                flex-direction: column;
                padding: 1rem;
                border-top: 1px solid var(--border-color);
            }

            .nav-links.active {
                display: flex;
            }

            .mobile-menu {
                display: block;
            }

            .nav-controls {
                gap: 0.5rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .service-grid {
                grid-template-columns: 1fr;
            }

            nav {
                padding: 1rem;
            }

            .auth-tabs {
                flex-direction: column;
            }

            .dashboard-nav {
                flex-direction: column;
            }

            .admin-stats {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }

            .table {
                font-size: 0.875rem;
            }

            .table th,
            .table td {
                padding: 0.5rem;
            }
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid var(--bg-light);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* User Avatar */
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <div style="width: 40px; height: 40px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    <span style="color: white; font-size: 1.5rem; font-weight: bold;">🔧</span>
                </div>
                <div>
                    <div class="logo-text">HelpLagbe</div>
                    <div class="logo-tagline">Help Anytime, Anywhere</div>
                </div>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a onclick="showSection('home')" class="active">Home</a></li>
                <li><a onclick="showSection('services')">Services</a></li>
                <li><a onclick="showSection('about')">About</a></li>
                <li><a onclick="showSection('auth')" id="authNavLink">Login</a></li>
                <li><a onclick="showSection('dashboard')" id="dashboardNavLink" style="display: none;">Dashboard</a></li>
            </ul>
            <div class="nav-controls">
                <button class="btn btn-primary btn-sm" onclick="showAdminPanel()" id="adminAccessBtn">Admin</button>
                <button class="btn lang-switch btn-sm" onclick="toggleLanguage()">বাংলা</button>
                <button class="mobile-menu" onclick="toggleMobileMenu()">☰</button>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <!-- Home Section -->
            <section id="home" class="section active">
                <div class="hero">
                    <div class="hero-content">
                        <h1 id="heroTitle">Find Expert Technicians</h1>
                        <p id="heroSubtitle">Connect with skilled professionals for all your repair and maintenance needs across Bangladesh</p>
                        <div class="cta-buttons">
                            <button class="btn btn-primary" onclick="showSection('auth')" id="getStartedBtn">Get Started</button>
                            <button class="btn btn-secondary" onclick="showSection('services')" id="browseServicesBtn">Browse Services</button>
                        </div>
                    </div>
                </div>

                <div class="services">
                    <h2 id="servicesTitle">Our Services</h2>
                    <div class="service-grid">
                        <div class="service-card" onclick="createServiceRequest('appliance')">
                            <div class="service-icon">🔧</div>
                            <h3 id="applianceTitle">Appliance Repair</h3>
                            <p id="applianceDesc">Professional repair services for all home appliances</p>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('electrical')">
                            <div class="service-icon">⚡</div>
                            <h3 id="electricalTitle">Electrical Work</h3>
                            <p id="electricalDesc">Licensed electricians for safe installations and repairs</p>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('plumbing')">
                            <div class="service-icon">🚿</div>
                            <h3 id="plumbingTitle">Plumbing</h3>
                            <p id="plumbingDesc">Expert plumbing solutions for your water systems</p>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('maintenance')">
                            <div class="service-icon">🔨</div>
                            <h3 id="maintenanceTitle">General Maintenance</h3>
                            <p id="maintenanceDesc">Complete home and office maintenance solutions</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Services Section -->
            <section id="services" class="section">
                <div class="services">
                    <h2 id="servicesPageTitle">Available Services</h2>
                    <div class="service-grid">
                        <div class="service-card" onclick="createServiceRequest('appliance')">
                            <div class="service-icon">🔧</div>
                            <h3>Appliance Repair</h3>
                            <p>Refrigerators, ACs, Washing Machines, Microwaves, and more</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('electrical')">
                            <div class="service-icon">⚡</div>
                            <h3>Electrical Work</h3>
                            <p>Wiring, Outlets, Switches, Circuit Breakers, Installation</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('plumbing')">
                            <div class="service-icon">🚿</div>
                            <h3>Plumbing Services</h3>
                            <p>Pipes, Faucets, Toilets, Water Heaters, Drainage</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('maintenance')">
                            <div class="service-icon">🔨</div>
                            <h3>General Maintenance</h3>
                            <p>Carpentry, Painting, Cleaning, Home Repairs</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('ac')">
                            <div class="service-icon">❄️</div>
                            <h3>AC Services</h3>
                            <p>AC Installation, Repair, Maintenance, Gas Refill</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;">Request Service</button>
                        </div>
                        <div class="service-card" onclick="createServiceRequest('electronics')">
                            <div class="service-icon">📺</div>
                            <h3>Electronics Repair</h3>
                            <p>TV, Mobile, Computer, Sound System Repairs</p>
                            <button class="btn btn-primary" style="margin-top: 1rem;">Request Service</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- About Section -->
            <section id="about" class="section">
                <div class="services">
                    <h2>About HelpLagbe</h2>
                    <div style="max-width: 800px; margin: 0 auto; text-align: center;">
                        <p style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 2rem;">
                            HelpLagbe is Bangladesh's premier platform connecting customers with verified, skilled technicians. 
                            We ensure quality service delivery with transparent pricing and reliable professionals.
                        </p>
                        
                        <div class="service-grid" style="margin-top: 3rem;">
                            <div class="service-card">
                                <div class="service-icon">✅</div>
                                <h3>Verified Technicians</h3>
                                <p>All our technicians are background-checked and skill-verified professionals</p>
                            </div>
                            <div class="service-card">
                                <div class="service-icon">💰</div>
                                <h3>Transparent Pricing</h3>
                                <p>Clear, upfront pricing with no hidden charges. Pay only for what you need</p>
                            </div>
                            <div class="service-card">
                                <div class="service-icon">🕒</div>
                                <h3>24/7 Support</h3>
                                <p>Round-the-clock customer support for all your service needs</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Authentication Section -->
            <section id="auth" class="section">
                <div class="auth-section">
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="showAuthTab('login')" id="loginTab">Login</button>
                        <button class="auth-tab" onclick="showAuthTab('register')" id="registerTab">Register</button>
                        <button class="auth-tab" onclick="showAuthTab('technician')" id="technicianTab">Join as Technician</button>
                    </div>

                    <!-- Login Form -->
                    <div id="login-form" class="auth-form active">
                        <h3 style="text-align: center; margin-bottom: 2rem; color: var(--text-primary);">Login to Your Account</h3>
                        <form onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label id="emailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="passwordLabel">Password</label>
                                <input type="password" name="password" required>
                            </div>
                            <button type="submit" class="btn btn-primary" id="loginBtn" style="width: 100%;">Login</button>
                        </form>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" class="auth-form">
                        <h3 style="text-align: center; margin-bottom: 2rem; color: var(--text-primary);">Create New Account</h3>
                        <form onsubmit="handleRegister(event)">
                            <div class="form-group">
                                <label id="usernameLabel">Full Name</label>
                                <input type="text" name="username" required>
                            </div>
                            <div class="form-group">
                                <label id="regEmailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="phoneLabel">Phone Number</label>
                                <input type="tel" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label id="regPasswordLabel">Password</label>
                                <input type="password" name="password" required minlength="6">
                            </div>
                            <div class="form-group">
                                <label id="addressLabel">Address</label>
                                <textarea name="address" rows="3" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" id="registerBtn" style="width: 100%;">Create Account</button>
                        </form>
                    </div>

                    <!-- Technician Form -->
                    <div id="technician-form" class="auth-form">
                        <h3 style="text-align: center; margin-bottom: 2rem; color: var(--text-primary);">Join as Technician</h3>
                        <form onsubmit="handleTechnicianRegister(event)">
                            <div class="form-group">
                                <label id="fullNameLabel">Full Name</label>
                                <input type="text" name="fullName" required>
                            </div>
                            <div class="form-group">
                                <label id="nationalIdLabel">National ID</label>
                                <input type="text" name="nationalId" required>
                            </div>
                            <div class="form-group">
                                <label id="techEmailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="techPhoneLabel">Phone Number</label>
                                <input type="tel" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label id="skillsLabel">Skills & Experience</label>
                                <textarea name="skills" rows="4" placeholder="Describe your technical skills and experience in detail" required></textarea>
                            </div>
                            <div class="form-group">
                                <label id="documentsLabel">Upload Documents (NID, Certificates)</label>
                                <input type="file" name="documents" multiple accept=".pdf,.jpg,.png">
                                <small style="color: var(--text-muted);">Upload your NID copy and any relevant certificates</small>
                            </div>
                            <button type="submit" class="btn btn-primary" id="applyBtn" style="width: 100%;">Submit Application</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboard" class="section">
                <div class="dashboard">
                    <div class="dashboard-header">
                        <h2 style="color: var(--text-primary);">Dashboard</h2>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <span style="color: var(--text-secondary);">Welcome back!</span>
                            <div class="user-avatar" id="userAvatar">U</div>
                        </div>
                    </div>
                    
                    <div class="dashboard-nav">
                        <button class="dashboard-tab active" onclick="showDashboardTab('posts')" id="postsTab">My Posts</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('tasks')" id="tasksTab">Available Tasks</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('create')" id="createTab">Create Post</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('profile')" id="profileTab">Profile</button>
                        <button class="dashboard-tab" onclick="showDashboardTab('history')" id="historyTab">History</button>
                    </div>

                    <!-- Posts Tab -->
                    <div id="posts-content" class="dashboard-content active">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Your Service Requests</h3>
                        <div id="posts-container">
                            <div class="loading">
                                <div class="spinner"></div>
                                <p>Loading your posts...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks Tab -->
                    <div id="tasks-content" class="dashboard-content">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Available Tasks</h3>
                        <div id="tasks-container">
                            <div class="loading">
                                <div class="spinner"></div>
                                <p>Loading available tasks...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Create Post Tab -->
                    <div id="create-content" class="dashboard-content">
                        <h3 style="color: var(--text-primary); margin-bottom: 2rem;">Create Service Request</h3>
                        <form onsubmit="handleCreatePost(event)">
                            <div class="form-group">
                                <label id="categoryLabel">Service Category</label>
                                <select name="category" required>
                                    <option value="">Select a service category</option>
                                    <option value="appliance">Appliance Repair</option>
                                    <option value="electrical">Electrical Work</option>
                                    <option value="plumbing">Plumbing Services</option>
                                    <option value="maintenance">General Maintenance</option>
                                    <option value="ac">AC Services</option>
                                    <option value="electronics">Electronics Repair</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label id="descriptionLabel">Problem Description</label>
                                <textarea name="description" rows="4" placeholder="Describe your problem in detail. Include location, urgency, and any specific requirements." required></textarea>
                            </div>
                            <div class="form-group">
                                <label>Preferred Date & Time</label>
                                <input type="datetime-local" name="preferredTime" required>
                            </div>
                            <div class="form-group">
                                <label>Budget Range (৳)</label>
                                <select name="budget" required>
                                    <option value="">Select budget range</option>
                                    <option value="500-1000">৳500 - ৳1,000</option>
                                    <option value="1000-2000">৳1,000 - ৳2,000</option>
                                    <option value="2000-5000">৳2,000 - ৳5,000</option>
                                    <option value="5000+">৳5,000+</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label id="imagesLabel">Upload Images</label>
                                <input type="file" name="images" multiple accept="image/*">
                                <small style="color: var(--text-muted);">Upload photos of the problem to help technicians understand better</small>
                            </div>
                            <button type="submit" class="btn btn-primary" id="postRequestBtn" style="width: 100%;">Submit Service Request</button>
                        </form>
                    </div>

                    <!-- Profile Tab -->
                    <div id="profile-content" class="dashboard-content">
                        <h3 style="color: var(--text-primary); margin-bottom: 2rem;">Profile Settings</h3>
                        <form onsubmit="handleProfileUpdate(event)" id="profile-form">
                            <div class="form-group">
                                <label id="profileUsernameLabel">Full Name</label>
                                <input type="text" name="username" required>
                            </div>
                            <div class="form-group">
                                <label id="profileEmailLabel">Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label id="profilePhoneLabel">Phone Number</label>
                                <input type="tel" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label id="profileAddressLabel">Address</label>
                                <textarea name="address" rows="3" required></textarea>
                            </div>
                            <div class="form-group">
                                <label>Change Password</label>
                                <input type="password" name="newPassword" placeholder="Leave blank to keep current password">
                            </div>
                            <button type="submit" class="btn btn-primary" id="updateProfileBtn" style="width: 100%;">Update Profile</button>
                        </form>
                    </div>

                    <!-- History Tab -->
                    <div id="history-content" class="dashboard-content">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Service History</h3>
                        <div id="history-container">
                            <div class="loading">
                                <div class="spinner"></div>
                                <p>Loading service history...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admin Panel Section -->
            <section id="admin-panel" class="section">
                <div class="admin-panel">
                    <!-- Admin Login -->
                    <div id="admin-login" class="admin-section active">
                        <div class="auth-section" style="max-width: 400px; margin: 0 auto;">
                            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Admin Access</h2>
                            <form onsubmit="handleAdminLogin(event)">
                                <div class="form-group">
                                    <label>Admin Username</label>
                                    <input type="text" name="username" required>
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" name="password" required>
                                </div>
                                <button type="submit" class="btn btn-primary" style="width: 100%;">Login to Admin Panel</button>
                            </form>
                        </div>
                    </div>

                    <!-- Admin Dashboard -->
                    <div id="admin-dashboard" class="admin-section">
                        <div class="admin-header">
                            <h1>HelpLagbe Admin Dashboard</h1>
                            <div>
                                <span id="admin-username">Admin</span>
                                <button class="btn btn-secondary btn-sm" onclick="adminLogout()" style="margin-left: 1rem;">Logout</button>
                            </div>
                        </div>

                        <!-- Admin Stats -->
                        <div class="admin-stats" id="admin-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="total-users">0</div>
                                <div class="stat-label">Total Users</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-technicians">0</div>
                                <div class="stat-label">Verified Technicians</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-posts">0</div>
                                <div class="stat-label">Service Requests</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-tasks">0</div>
                                <div class="stat-label">Completed Tasks</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="revenue">৳0</div>
                                <div class="stat-label">Total Revenue</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="pending-approval">0</div>
                                <div class="stat-label">Pending Approvals</div>
                            </div>
                        </div>

                        <!-- Admin Navigation -->
                        <div class="dashboard-nav">
                            <button class="dashboard-tab active" onclick="showAdminTab('overview')" id="overview-tab">Overview</button>
                            <button class="dashboard-tab" onclick="showAdminTab('users')" id="users-tab">Users</button>
                            <button class="dashboard-tab" onclick="showAdminTab('technicians')" id="technicians-tab">Technicians</button>
                            <button class="dashboard-tab" onclick="showAdminTab('admin-posts')" id="admin-posts-tab">Service Requests</button>
                            <button class="dashboard-tab" onclick="showAdminTab('admin-tasks')" id="admin-tasks-tab">Tasks</button>
                            <button class="dashboard-tab" onclick="showAdminTab('approvals')" id="approvals-tab">Approvals</button>
                        </div>

                        <!-- Admin Content Areas -->
                        <div id="admin-overview-content" class="dashboard-content active">
                            <h3 style="color: var(--text-primary);">System Overview</h3>
                            <div style="margin-top: 2rem;">
                                <h4 style="color: var(--text-primary); margin-bottom: 1rem;">Recent Activities</h4>
                                <div id="recent-activities">
                                    <div class="loading">
                                        <div class="spinner"></div>
                                        <p>Loading recent activities...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="admin-users-content" class="dashboard-content">
                            <h3 style="color: var(--text-primary);">Manage Users</h3>
                            <div id="admin-users-container">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    <p>Loading users...</p>
                                </div>
                            </div>
                        </div>

                        <div id="admin-technicians-content" class="dashboard-content">
                            <h3 style="color: var(--text-primary);">Manage Technicians</h3>
                            <div id="admin-technicians-container">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    <p>Loading technicians...</p>
                                </div>
                            </div>
                        </div>

                        <div id="admin-posts-content" class="dashboard-content">
                            <h3 style="color: var(--text-primary);">Service Requests</h3>
                            <div id="admin-posts-container">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    <p>Loading service requests...</p>
                                </div>
                            </div>
                        </div>

                        <div id="admin-tasks-content" class="dashboard-content">
                            <h3 style="color: var(--text-primary);">Task Management</h3>
                            <div id="admin-tasks-container">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    <p>Loading tasks...</p>
                                </div>
                            </div>
                        </div>

                        <div id="approvals-content" class="dashboard-content">
                            <h3 style="color: var(--text-primary);">Pending Approvals</h3>
                            <div id="admin-approvals-container">
                                <div class="loading">
                                    <div class="spinner"></div>
                                    <p>Loading pending approvals...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo" style="margin-bottom: 1rem;">
                        <div style="width: 40px; height: 40px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <span style="color: white; font-size: 1.5rem; font-weight: bold;">🔧</span>
                        </div>
                        <div>
                            <div class="logo-text">HelpLagbe</div>
                            <div class="logo-tagline">Help Anytime, Anywhere</div>
                        </div>
                    </div>
                    <p>Bangladesh's trusted platform for connecting customers with verified technicians. Quality service guaranteed.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Services</h4>
                    <p><a href="#" onclick="createServiceRequest('appliance')">Appliance Repair</a></p>
                    <p><a href="#" onclick="createServiceRequest('electrical')">Electrical Work</a></p>
                    <p><a href="#" onclick="createServiceRequest('plumbing')">Plumbing Services</a></p>
                    <p><a href="#" onclick="createServiceRequest('maintenance')">General Maintenance</a></p>
                </div>
                
                <div class="footer-section">
                    <h4>Company</h4>
                    <p><a href="#" onclick="showSection('about')">About Us</a></p>
                    <p><a href="#" onclick="showSection('services')">Our Services</a></p>
                    <p><a href="#" onclick="showSection('auth')">Join as Technician</a></p>
                </div>
                
                <div class="footer-section">
                    <h4>Contact</h4>
                    <p>📞 +880 1325-409985</p>
                    <p>✉️ support@helplagbe.com</p>
                    <p>📍 Dhaka, Bangladesh</p>
                    <p>🕒 24/7 Customer Support</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 HelpLagbe. All rights reserved. | Privacy Policy | Terms of Service</p>
            </div>
        </div>
    </footer>

    <!-- Modal for Bid Details -->
    <div id="bid-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Bid Details</h3>
                <button class="close-btn" onclick="closeBidModal()">&times;</button>
            </div>
            <div id="bid-modal-content">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading bid details...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Service Details -->
    <div id="service-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Service Details</h3>
                <button class="close-btn" onclick="closeServiceModal()">&times;</button>
            </div>
            <div id="service-modal-content">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading service details...</p>
                </div>
            </div>
        </div>
    </div>

    <button class="floating-chat" onclick="toggleChat()" title="Customer Support">💬</button>

    <script>
        // Configuration
        const API_BASE_URL = '/api'; // Update this to your actual API endpoint
        let currentLanguage = 'en';
        let isLoggedIn = false;
        let isAdminLoggedIn = false;
        let userData = {};
        let adminData = {};

        // Language translations
        const translations = {
            en: {
                heroTitle: "Find Expert Technicians",
                heroSubtitle: "Connect with skilled professionals for all your repair and maintenance needs across Bangladesh",
                getStartedBtn: "Get Started",
                browseServicesBtn: "Browse Services",
                servicesTitle: "Our Services",
                servicesPageTitle: "Available Services",
                applianceTitle: "Appliance Repair",
                applianceDesc: "Professional repair services for all home appliances",
                electricalTitle: "Electrical Work",
                electricalDesc: "Licensed electricians for safe installations and repairs",
                maintenanceTitle: "General Maintenance",
                maintenanceDesc: "Complete home and office maintenance solutions",
                plumbingTitle: "Plumbing",
                plumbingDesc: "Expert plumbing solutions for your water systems",
                loginTab: "Login",
                registerTab: "Register",
                technicianTab: "Join as Technician",
                emailLabel: "Email",
                passwordLabel: "Password",
                loginBtn: "Login",
                usernameLabel: "Full Name",
                phoneLabel: "Phone Number",
                addressLabel: "Address",
                registerBtn: "Create Account",
                fullNameLabel: "Full Name",
                nationalIdLabel: "National ID",
                skillsLabel: "Skills & Experience",
                documentsLabel: "Upload Documents",
                applyBtn: "Submit Application",
                postsTab: "My Posts",
                tasksTab: "Available Tasks",
                createTab: "Create Post",
                profileTab: "Profile",
                historyTab: "History",
                categoryLabel: "Service Category",
                descriptionLabel: "Problem Description",
                imagesLabel: "Upload Images",
                postRequestBtn: "Submit Service Request",
                updateProfileBtn: "Update Profile"
            },
            bn: {
                heroTitle: "দক্ষ কারিগর খুঁজুন",
                heroSubtitle: "বাংলাদেশ জুড়ে আপনার সকল মেরামত ও রক্ষণাবেক্ষণের জন্য দক্ষ পেশাদারদের সাথে যোগাযোগ করুন",
                getStartedBtn: "শুরু করুন",
                browseServicesBtn: "সেবা দেখুন",
                servicesTitle: "আমাদের সেবা",
                servicesPageTitle: "উপলব্ধ সেবা",
                applianceTitle: "যন্ত্র মেরামত",
                applianceDesc: "সকল ঘরোয়া যন্ত্রের জন্য পেশাদার মেরামত সেবা",
                electricalTitle: "বৈদ্যুতিক কাজ",
                electricalDesc: "নিরাপদ স্থাপনা ও মেরামতের জন্য লাইসেন্সপ্রাপ্ত ইলেকট্রিশিয়ান",
                maintenanceTitle: "সাধারণ রক্ষণাবেক্ষণ",
                maintenanceDesc: "সম্পূর্ণ বাড়ি ও অফিস রক্ষণাবেক্ষণ সমাধান",
                plumbingTitle: "নলসাজি",
                plumbingDesc: "আপনার পানি ব্যবস্থার জন্য বিশেষজ্ঞ নলসাজি সমাধান",
                loginTab: "লগইন",
                registerTab: "রেজিস্টার",
                technicianTab: "কারিগর হিসেবে যোগদান",
                emailLabel: "ইমেইল",
                passwordLabel: "পাসওয়ার্ড",
                loginBtn: "লগইন",
                usernameLabel: "পূর্ণ নাম",
                phoneLabel: "ফোন নম্বর",
                addressLabel: "ঠিকানা",
                registerBtn: "অ্যাকাউন্ট তৈরি করুন",
                fullNameLabel: "পূর্ণ নাম",
                nationalIdLabel: "জাতীয় পরিচয়পত্র",
                skillsLabel: "দক্ষতা ও অভিজ্ঞতা",
                documentsLabel: "কাগজপত্র আপলোড করুন",
                applyBtn: "আবেদন জমা দিন",
                postsTab: "আমার পোস্ট",
                tasksTab: "উপলব্ধ কাজ",
                createTab: "পোস্ট তৈরি করুন",
                profileTab: "প্রোফাইল",
                historyTab: "ইতিহাস",
                categoryLabel: "সেবার ধরন",
                descriptionLabel: "সমস্যার বিবরণ",
                imagesLabel: "ছবি আপলোড করুন",
                postRequestBtn: "সেবার অনুরোধ জমা দিন",
                updateProfileBtn: "প্রোফাইল আপডেট করুন"
            }
        };

        // API Helper Functions
        async function apiCall(endpoint, method = 'GET', data = null) {
            try {
                const config = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    }
                };

                if (data && method !== 'GET') {
                    config.body = JSON.stringify(data);
                }

                const response = await fetch(`${API_BASE_URL}${endpoint}`, config);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                return await response.json();
            } catch (error) {
                console.error('API call error:', error);
                throw error;
            }
        }

        // Language switching
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'bn' : 'en';
            updateLanguage();
        }

        function updateLanguage() {
            const langBtn = document.querySelector('.lang-switch');
            langBtn.textContent = currentLanguage === 'en' ? 'বাংলা' : 'English';

            // Update all text elements
            Object.keys(translations[currentLanguage]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }

        // Navigation functions
        function showSection(sectionName) {
            // Remove active class from all nav links
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => link.classList.remove('active'));

            // Add active class to current nav link
            const currentLink = document.querySelector(`.nav-links a[onclick="showSection('${sectionName}')"]`);
            if (currentLink) {
                currentLink.classList.add('active');
            }

            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Show requested section
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Handle auth/dashboard logic
            if (sectionName === 'auth' && isLoggedIn) {
                showSection('dashboard');
                return;
            }
            if (sectionName === 'dashboard' && !isLoggedIn) {
                showSection('auth');
                return;
            }

            // Load data for dashboard sections
            if (sectionName === 'dashboard' && isLoggedIn) {
                loadUserPosts();
                loadAvailableTasks();
            }

            // Update navigation
            updateNavigation();
        }

        function updateNavigation() {
            const authNavLink = document.getElementById('authNavLink');
            const dashboardNavLink = document.getElementById('dashboardNavLink');
            
            if (isLoggedIn) {
                authNavLink.textContent = currentLanguage === 'en' ? 'Logout' : 'লগআউট';
                authNavLink.onclick = logout;
                dashboardNavLink.style.display = 'block';

                // Update user avatar
                const userAvatar = document.getElementById('userAvatar');
                if (userAvatar && userData.username) {
                    userAvatar.textContent = userData.username.charAt(0).toUpperCase();
                }
            } else {
                authNavLink.textContent = currentLanguage === 'en' ? 'Login' : 'লগইন';
                authNavLink.onclick = () => showSection('auth');
                dashboardNavLink.style.display = 'none';
            }
        }

        // Admin panel functions
        function showAdminPanel() {
            if (isAdminLoggedIn) {
                showSection('admin-panel');
                showAdminSection('admin-dashboard');
                loadAdminStats();
            } else {
                showSection('admin-panel');
                showAdminSection('admin-login');
            }
        }

        function showAdminSection(sectionName) {
            const adminSections = document.querySelectorAll('.admin-section');
            adminSections.forEach(section => {
                section.classList.remove('active');
            });

            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }

        async function handleAdminLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                username: formData.get('username'),
                password: formData.get('password')
            };

            try {
                showNotification('Connecting to admin panel...', 'info');
                const result = await apiCall('/admin/login', 'POST', data);
                
                if (result.success) {
                    isAdminLoggedIn = true;
                    adminData = result.data;
                    document.getElementById('admin-username').textContent = result.data.username;
                    showAdminSection('admin-dashboard');
                    loadAdminStats();
                    showNotification('Admin login successful!');
                } else {
                    showNotification(result.message || 'Invalid admin credentials', 'error');
                }
            } catch (error) {
                showNotification('Failed to connect to admin panel. Please check your connection.', 'error');
                console.error('Admin login error:', error);
            }
        }

        function adminLogout() {
            isAdminLoggedIn = false;
            adminData = {};
            showSection('home');
            showNotification('Admin logged out successfully');
        }

        async function loadAdminStats() {
            try {
                const result = await apiCall('/admin/stats');
                
                if (result.success) {
                    const stats = result.data;
                    document.getElementById('total-users').textContent = stats.total_users || 0;
                    document.getElementById('total-technicians').textContent = stats.total_technicians || 0;
                    document.getElementById('total-posts').textContent = stats.total_posts || 0;
                    document.getElementById('total-tasks').textContent = stats.total_tasks || 0;
                    document.getElementById('revenue').textContent = `৳${stats.revenue || 0}`;
                    document.getElementById('pending-approval').textContent = stats.pending_approval || 0;
                }
            } catch (error) {
                console.error('Failed to load admin stats:', error);
                showNotification('Failed to load admin statistics', 'error');
            }
        }

        function showAdminTab(tabName) {
            // Update tab buttons
            const tabs = document.querySelectorAll('.dashboard-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // Show tab content
            const contents = document.querySelectorAll('.dashboard-content');
            contents.forEach(content => content.classList.remove('active'));
            document.getElementById(`admin-${tabName}-content`).classList.add('active');

            // Load data for the tab
            switch (tabName) {
                case 'overview':
                    loadAdminOverview();
                    break;
                case 'users':
                    loadAdminUsers();
                    break;
                case 'technicians':
                    loadAdminTechnicians();
                    break;
                case 'admin-posts':
                    loadAdminPosts();
                    break;
                case 'admin-tasks':
                    loadAdminTasks();
                    break;
                case 'approvals':
                    loadPendingApprovals();
                    break;
            }
        }

        // Admin data loading functions
        async function loadAdminOverview() {
            const container = document.getElementById('recent-activities');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading recent activities...</p></div>';

            try {
                const result = await apiCall('/admin/recent-activities');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = result.data.map(activity => `
                        <div class="post-card">
                            <p><strong>${activity.type}:</strong> ${activity.description}</p>
                            <small style="color: var(--text-muted);">${new Date(activity.timestamp).toLocaleString()}</small>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = '<p style="color: var(--text-muted);">No recent activities found.</p>';
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load recent activities</div>';
            }
        }

        async function loadAdminUsers() {
            const container = document.getElementById('admin-users-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading users...</p></div>';

            try {
                const result = await apiCall('/admin/users');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Posts</th>
                                    <th>Join Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.data.map(user => `
                                    <tr>
                                        <td>${user.id}</td>
                                        <td>${user.name}</td>
                                        <td>${user.email}</td>
                                        <td>${user.phone || 'N/A'}</td>
                                        <td>${user.posts_count || 0}</td>
                                        <td>${new Date(user.created_at).toLocaleDateString()}</td>
                                        <td>
                                            <span class="status-badge ${user.status === 'active' ? 'status-accepted' : 'status-pending'}">
                                                ${user.status.toUpperCase()}
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewUserDetails(${user.id})">
                                                View Details
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = '<p style="color: var(--text-muted);">No users found.</p>';
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load users</div>';
            }
        }

        async function loadAdminTechnicians() {
            const container = document.getElementById('admin-technicians-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading technicians...</p></div>';

            try {
                const result = await apiCall('/admin/technicians');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Skills</th>
                                    <th>Completed Tasks</th>
                                    <th>Rating</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.data.map(tech => `
                                    <tr>
                                        <td>${tech.id}</td>
                                        <td>${tech.name}</td>
                                        <td>${tech.email}</td>
                                        <td>${tech.phone}</td>
                                        <td title="${tech.skills}">${tech.skills.substring(0, 30)}...</td>
                                        <td>${tech.completed_tasks || 0}</td>
                                        <td>${tech.rating || 'N/A'}/5</td>
                                        <td>
                                            <span class="status-badge ${tech.status === 'verified' ? 'status-accepted' : 'status-pending'}">
                                                ${tech.status.toUpperCase()}
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewTechnicianDetails(${tech.id})">
                                                View Profile
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = '<p style="color: var(--text-muted);">No technicians found.</p>';
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load technicians</div>';
            }
        }

        async function loadAdminPosts() {
            const container = document.getElementById('admin-posts-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading service requests...</p></div>';

            try {
                const result = await apiCall('/admin/posts');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Customer</th>
                                    <th>Category</th>
                                    <th>Description</th>
                                    <th>Budget</th>
                                    <th>Bids</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.data.map(post => `
                                    <tr>
                                        <td>${post.id}</td>
                                        <td>${post.customer_name}</td>
                                        <td>
                                            <span class="status-badge status-pending">${post.category}</span>
                                        </td>
                                        <td title="${post.description}">${post.description.substring(0, 40)}...</td>
                                        <td>${post.budget}</td>
                                        <td>${post.bids_count || 0}</td>
                                        <td>
                                            <span class="status-badge ${post.status === 'completed' ? 'status-completed' : post.status === 'accepted' ? 'status-accepted' : 'status-pending'}">
                                                ${post.status.toUpperCase()}
                                            </span>
                                        </td>
                                        <td>${new Date(post.created_at).toLocaleDateString()}</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewPostDetails(${post.id})">
                                                View Details
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = '<p style="color: var(--text-muted);">No service requests found.</p>';
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load service requests</div>';
            }
        }

        async function loadAdminTasks() {
            const container = document.getElementById('admin-tasks-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading tasks...</p></div>';

            try {
                const result = await apiCall('/admin/tasks');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = `
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Customer</th>
                                    <th>Technician</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.data.map(task => `
                                    <tr>
                                        <td>${task.id}</td>
                                        <td>${task.customer_name}</td>
                                        <td>${task.technician_name}</td>
                                        <td>
                                            <span class="status-badge status-pending">${task.category}</span>
                                        </td>
                                        <td>৳${task.price}</td>
                                        <td>
                                            <span class="status-badge status-${task.status}">
                                                ${task.status.toUpperCase()}
                                            </span>
                                        </td>
                                        <td>${new Date(task.created_at).toLocaleDateString()}</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" onclick="viewTaskDetails(${task.id})">
                                                Manage
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                } else {
                    container.innerHTML = '<p style="color: var(--text-muted);">No tasks found.</p>';
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load tasks</div>';
            }
        }

        async function loadPendingApprovals() {
            const container = document.getElementById('admin-approvals-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading pending approvals...</p></div>';

            try {
                const result = await apiCall('/admin/pending-approvals');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = result.data.map(approval => `
                        <div class="post-card">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div style="flex: 1;">
                                    <h4 style="color: var(--text-primary);">${approval.type}: ${approval.name}</h4>
                                    <p style="color: var(--text-secondary); margin: 0.5rem 0;">
                                        <strong>Email:</strong> ${approval.email}<br>
                                        <strong>Phone:</strong> ${approval.phone}<br>
                                        <strong>Applied:</strong> ${new Date(approval.created_at).toLocaleDateString()}
                                    </p>
                                    ${approval.type === 'Technician Application' ? `
                                        <p style="color: var(--text-secondary);">
                                            <strong>Skills:</strong> ${approval.skills}
                                        </p>
                                    ` : ''}
                                </div>
                                <div style="display: flex; gap: 0.5rem; margin-left: 1rem;">
                                    <button class="btn btn-success btn-sm" onclick="approveApplication(${approval.id}, '${approval.type}')">
                                        Approve
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="rejectApplication(${approval.id}, '${approval.type}')">
                                        Reject
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = '<p style="color: var(--text-muted);">No pending approvals.</p>';
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load pending approvals</div>';
            }
        }

        // User authentication functions
        async function logout() {
            try {
                await apiCall('/auth/logout', 'POST');
            } catch (error) {
                console.error('Logout error:', error);
            } finally {
                isLoggedIn = false;
                userData = {};
                updateNavigation();
                showSection('home');
                showNotification(currentLanguage === 'en' ? 'Logged out successfully!' : 'সফলভাবে লগআউট হয়েছে!');
            }
        }

        // Authentication tab switching
        function showAuthTab(tabName) {
            const tabs = document.querySelectorAll('.auth-tab');
            const forms = document.querySelectorAll('.auth-form');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            forms.forEach(form => form.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-form`).classList.add('active');
        }

        // Dashboard tab switching
        function showDashboardTab(tabName) {
            const tabs = document.querySelectorAll('.dashboard-tab');
            const contents = document.querySelectorAll('.dashboard-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-content`).classList.add('active');

            // Load data based on tab
            switch (tabName) {
                case 'posts':
                    loadUserPosts();
                    break;
                case 'tasks':
                    loadAvailableTasks();
                    break;
                case 'profile':
                    loadProfileData();
                    break;
                case 'history':
                    loadServiceHistory();
                    break;
            }
        }

        // Form handlers
        async function handleLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                email: formData.get('email'),
                password: formData.get('password')
            };
            
            try {
                showNotification('Logging in...', 'info');
                const result = await apiCall('http://localhost:3000/helplagbe/api/auth/login.php', 'POST', data);

                
                if (result.success) {
                    isLoggedIn = true;
                    userData = result.data;
                    
                    showNotification(currentLanguage === 'en' ? 'Login successful!' : 'লগইন সফল!');
                    updateNavigation();
                    showSection('dashboard');
                } else {
                    showNotification(result.message || 'Invalid credentials', 'error');
                }
            } catch (error) {
                showNotification('Login failed. Please check your connection.', 'error');
                console.error('Login error:', error);
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                name: formData.get('username'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                password: formData.get('password'),
                address: formData.get('address')
            };
            
            try {
                showNotification('Creating account...', 'info');
                const result = await apiCall('api/auth/register.php', 'POST', data);
                
                if (result.success) {
                    isLoggedIn = true;
                    userData = result.data;
                    
                    showNotification(currentLanguage === 'en' ? 'Registration successful!' : 'রেজিস্ট্রেশন সফল!');
                    updateNavigation();
                    showSection('dashboard');
                } else {
                    showNotification(result.message || 'Registration failed', 'error');
                }
            } catch (error) {
                showNotification('Registration failed. Please check your connection.', 'error');
                console.error('Registration error:', error);
            }
        }

        async function handleTechnicianRegister(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                name: formData.get('fullName'),
                national_id: formData.get('nationalId'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                skills: formData.get('skills')
            };
            
            try {
                showNotification('Submitting application...', 'info');
                const result = await apiCall('/auth/technician-register', 'POST', data);
                
                if (result.success) {
                    showNotification(currentLanguage === 'en' ? 
                        'Technician application submitted! We will review and contact you within 48 hours.' : 
                        'কারিগর আবেদন জমা দেওয়া হয়েছে! আমরা ৪৮ ঘন্টার মধ্যে পর্যালোচনা করে যোগাযোগ করব।'
                    );
                    showAuthTab('login');
                    event.target.reset();
                } else {
                    showNotification(result.message || 'Application failed', 'error');
                }
            } catch (error) {
                showNotification('Application failed. Please check your connection.', 'error');
                console.error('Technician registration error:', error);
            }
        }

        async function handleCreatePost(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                category: formData.get('category'),
                description: formData.get('description'),
                preferred_time: formData.get('preferredTime'),
                budget: formData.get('budget')
            };
            
            try {
                showNotification('Creating service request...', 'info');
                const result = await apiCall('/posts/create', 'POST', data);
                
                if (result.success) {
                    showNotification(currentLanguage === 'en' ? 'Service request created successfully!' : 'সেবার অনুরোধ সফলভাবে তৈরি হয়েছে!');
                    showDashboardTab('posts');
                    event.target.reset();
                } else {
                    showNotification(result.message || 'Failed to create service request', 'error');
                }
            } catch (error) {
                showNotification('Failed to create service request. Please check your connection.', 'error');
                console.error('Create post error:', error);
            }
        }

        async function handleProfileUpdate(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                name: formData.get('username'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                address: formData.get('address')
            };

            // Only include password if it's provided
            const newPassword = formData.get('newPassword');
            if (newPassword && newPassword.trim() !== '') {
                data.password = newPassword;
            }
            
            try {
                showNotification('Updating profile...', 'info');
                const result = await apiCall('/auth/profile', 'PUT', data);
                
                if (result.success) {
                    userData = { ...userData, ...result.data };
                    showNotification(currentLanguage === 'en' ? 'Profile updated successfully!' : 'প্রোফাইল সফলভাবে আপডেট হয়েছে!');
                } else {
                    showNotification(result.message || 'Failed to update profile', 'error');
                }
            } catch (error) {
                showNotification('Failed to update profile. Please check your connection.', 'error');
                console.error('Profile update error:', error);
            }
        }

        // Data loading functions
        async function loadUserPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading your posts...</p></div>';
            
            try {
                const result = await apiCall('/posts/user-posts');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = result.data.map(post => `
                        <div class="post-card">
                            <h4 style="color: var(--text-primary);">${post.category}</h4>
                            <p style="color: var(--text-secondary);">${post.description}</p>
                            <div style="margin: 1rem 0;">
                                <span class="status-badge status-${post.status}">${post.status.toUpperCase()}</span>
                                <span style="margin-left: 1rem; color: var(--text-muted);">Budget: ${post.budget}</span>
                            </div>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                                <strong>Bids Received:</strong> ${post.bids_count || 0} | 
                                <strong>Created:</strong> ${new Date(post.created_at).toLocaleDateString()}
                            </p>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-primary btn-sm" onclick="viewBids(${post.id})">View Bids</button>
                                <button class="btn btn-outline btn-sm" onclick="editPost(${post.id})">Edit</button>
                                <button class="btn btn-outline btn-sm" onclick="deletePost(${post.id})">Delete</button>
                            </div>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            <p>No service requests found.</p>
                            <button class="btn btn-primary" onclick="showDashboardTab('create')" style="margin-top: 1rem;">
                                Create Your First Request
                            </button>
                        </div>
                    `;
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load your posts. Please refresh the page.</div>';
            }
        }

        async function loadAvailableTasks() {
            const container = document.getElementById('tasks-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading available tasks...</p></div>';
            
            try {
                const result = await apiCall('/posts/available-tasks');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = result.data.map(task => `
                        <div class="task-card">
                            <h4 style="color: var(--text-primary);">${task.category}</h4>
                            <p style="color: var(--text-secondary);">${task.description}</p>
                            <div style="margin: 1rem 0;">
                                <p style="color: var(--text-secondary); margin-bottom: 0.5rem;">
                                    <strong>Customer:</strong> ${task.customer_name}<br>
                                    <strong>Budget:</strong> ${task.budget}<br>
                                    <strong>Preferred Time:</strong> ${new Date(task.preferred_time).toLocaleString()}<br>
                                    <strong>Current Bids:</strong> ${task.bids_count || 0}
                                </p>
                                <span class="status-badge status-pending">Open for Bids</span>
                            </div>
                            ${userData.is_technician ? `
                                <div style="background: var(--bg-dark); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                                        <input type="number" id="bid-${task.id}" placeholder="Enter your bid amount (৳)" min="1" style="flex: 1; padding: 0.5rem; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 5px; color: var(--text-primary);">
                                        <button class="btn btn-primary btn-sm" onclick="submitBid(${task.id})">Submit Bid</button>
                                    </div>
                                </div>
                            ` : `
                                <p style="margin-top: 1rem; color: var(--text-muted); font-style: italic;">
                                    Register as a technician to bid on tasks
                                </p>
                            `}
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            <p>No tasks available at the moment.</p>
                            <p>Check back later for new opportunities!</p>
                        </div>
                    `;
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load available tasks. Please refresh the page.</div>';
            }
        }

        async function loadServiceHistory() {
            const container = document.getElementById('history-container');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading service history...</p></div>';
            
            try {
                const result = await apiCall('/posts/history');
                
                if (result.success && result.data.length > 0) {
                    container.innerHTML = result.data.map(service => `
                        <div class="post-card">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div style="flex: 1;">
                                    <h4 style="color: var(--text-primary);">${service.category}</h4>
                                    <p style="color: var(--text-secondary);">${service.description}</p>
                                    <p style="color: var(--text-secondary); margin: 0.5rem 0;">
                                        <strong>Technician:</strong> ${service.technician_name}<br>
                                        <strong>Price:</strong> ৳${service.price}<br>
                                        <strong>Date:</strong> ${new Date(service.completed_at).toLocaleDateString()}
                                    </p>
                                </div>
                                <div style="text-align: right;">
                                    <span class="status-badge status-${service.status}">${service.status.toUpperCase()}</span>
                                    ${service.status === 'completed' ? `
                                        <div style="margin-top: 0.5rem;">
                                            <button class="btn btn-outline btn-sm" onclick="rateTechnician(${service.id})">Rate Service</button>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            <p>No service history found.</p>
                            <p>Complete your first service to see history here.</p>
                        </div>
                    `;
                }
            } catch (error) {
                container.innerHTML = '<div class="error">Failed to load service history. Please refresh the page.</div>';
            }
        }

        function loadProfileData() {
            if (userData) {
                const form = document.getElementById('profile-form');
                const inputs = form.querySelectorAll('input, textarea');
                
                inputs.forEach(input => {
                    const name = input.name;
                    if (userData[name] && name !== 'newPassword') {
                        input.value = userData[name];
                    }
                });
            }
        }

        // Task functions
        async function submitBid(postId) {
            const bidInput = document.getElementById(`bid-${postId}`);
            const bidAmount = bidInput.value;
            
            if (!bidAmount || bidAmount <= 0) {
                showNotification('Please enter a valid bid amount', 'error');
                return;
            }
            
            const data = {
                post_id: postId,
                price: bidAmount
            };
            
            try {
                showNotification('Submitting bid...', 'info');
                const result = await apiCall('/bids/submit', 'POST', data);
                
                if (result.success) {
                    showNotification(currentLanguage === 'en' ? 
                        `Bid of ৳${bidAmount} submitted successfully!` : 
                        `৳${bidAmount} বিড সফলভাবে জমা দেওয়া হয়েছে!`
                    );
                    bidInput.value = '';
                    loadAvailableTasks();
                } else {
                    showNotification(result.message || 'Failed to submit bid', 'error');
                }
            } catch (error) {
                showNotification('Failed to submit bid. Please check your connection.', 'error');
                console.error('Submit bid error:', error);
            }
        }

        async function viewBids(postId) {
            try {
                showNotification('Loading bids...', 'info');
                const result = await apiCall(`/posts/${postId}/bids`);
                
                if (result.success && result.data.length > 0) {
                    showBidModal(result.data, postId);
                } else {
                    showNotification('No bids received yet.', 'error');
                }
            } catch (error) {
                showNotification('Failed to load bids. Please try again.', 'error');
                console.error('View bids error:', error);
            }
        }

        function showBidModal(bids, postId) {
            const modal = document.getElementById('bid-modal');
            const modalContent = document.getElementById('bid-modal-content');
            
            let bidsHtml = '<div style="max-height: 400px; overflow-y: auto;">';
            bidsHtml += '<h4 style="margin-bottom: 1rem; color: var(--text-primary);">Bids for your service request:</h4>';
            
            bids.forEach(bid => {
                bidsHtml += `
                    <div style="background: var(--bg-dark); padding: 1rem; margin: 0.5rem 0; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div style="flex: 1;">
                                <h5 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">${bid.technician_name}</h5>
                                <p style="margin: 0; color: var(--primary-color); font-weight: bold; font-size: 1.2rem;">৳${bid.price}</p>
                                <p style="margin: 0.25rem 0; color: var(--text-secondary);"><strong>Phone:</strong> ${bid.phone}</p>
                                <p style="margin: 0.25rem 0; color: var(--text-secondary);"><strong>Experience:</strong> ${bid.experience || 'N/A'}</p>
                                <p style="margin: 0.25rem 0; color: var(--text-secondary);"><strong>Skills:</strong> ${bid.skills || 'N/A'}</p>
                                <p style="margin: 0.25rem 0; color: var(--text-secondary);"><strong>Rating:</strong> ${bid.rating || 'New'}/5</p>
                                <span class="status-badge status-${bid.status}" style="margin-top: 0.5rem;">${bid.status.charAt(0).toUpperCase() + bid.status.slice(1)}</span>
                            </div>
                            <div style="margin-left: 1rem;">
                                ${bid.status === 'pending' ? 
                                    `<button onclick="acceptBid(${bid.id}, ${postId})" class="btn btn-success btn-sm">Accept Bid</button>` : 
                                    '<span style="color: var(--success-color); font-weight: bold; padding: 0.5rem 1rem; background: rgba(40, 167, 69, 0.1); border-radius: 5px; border: 1px solid var(--success-color);">ACCEPTED</span>'
                                }
                            </div>
                        </div>
                    </div>
                `;
            });
            bidsHtml += '</div>';
            
            modalContent.innerHTML = bidsHtml;
            modal.style.display = 'flex';
        }

        async function acceptBid(bidId, postId) {
            try {
                showNotification('Accepting bid...', 'info');
                const result = await apiCall(`/bids/${bidId}/accept`, 'PUT');
                
                if (result.success) {
                    showNotification('Bid accepted successfully! The technician will contact you soon.');
                    closeBidModal();
                    loadUserPosts();
                } else {
                    showNotification(result.message || 'Failed to accept bid', 'error');
                }
            } catch (error) {
                showNotification('Failed to accept bid. Please try again.', 'error');
                console.error('Accept bid error:', error);
            }
        }

        // Service request functions
        function createServiceRequest(category) {
            if (!isLoggedIn) {
                showNotification(currentLanguage === 'en' ? 'Please login to request services' : 'সেবার জন্য অনুরোধ করতে লগইন করুন', 'error');
                showSection('auth');
                return;
            }
            
            showSection('dashboard');
            showDashboardTab('create');
            
            // Pre-select category
            setTimeout(() => {
                const categorySelect = document.querySelector('select[name="category"]');
                if (categorySelect) {
                    categorySelect.value = category;
                }
            }, 100);
        }

        // Admin approval functions
        async function approveApplication(id, type) {
            try {
                showNotification('Processing approval...', 'info');
                const result = await apiCall('/admin/approve-application', 'POST', { id, type });
                
                if (result.success) {
                    showNotification(`${type} approved successfully!`);
                    loadPendingApprovals();
                    loadAdminStats();
                } else {
                    showNotification(result.message || 'Failed to approve application', 'error');
                }
            } catch (error) {
                showNotification('Failed to approve application. Please try again.', 'error');
                console.error('Approve application error:', error);
            }
        }

        async function rejectApplication(id, type) {
            if (confirm('Are you sure you want to reject this application?')) {
                try {
                    showNotification('Processing rejection...', 'info');
                    const result = await apiCall('/admin/reject-application', 'POST', { id, type });
                    
                    if (result.success) {
                        showNotification(`${type} rejected successfully!`);
                        loadPendingApprovals();
                        loadAdminStats();
                    } else {
                        showNotification(result.message || 'Failed to reject application', 'error');
                    }
                } catch (error) {
                    showNotification('Failed to reject application. Please try again.', 'error');
                    console.error('Reject application error:', error);
                }
            }
        }

        // Utility functions
        async function editPost(postId) {
            try {
                const result = await apiCall(`/posts/${postId}`);
                if (result.success) {
                    // Pre-fill the create form with existing data
                    showDashboardTab('create');
                    const form = document.querySelector('#create-content form');
                    const data = result.data;
                    
                    form.querySelector('[name="category"]').value = data.category;
                    form.querySelector('[name="description"]').value = data.description;
                    form.querySelector('[name="budget"]').value = data.budget;
                    
                    // Change button text and form action
                    const submitBtn = form.querySelector('button[type="submit"]');
                    submitBtn.textContent = 'Update Service Request';
                    submitBtn.setAttribute('data-post-id', postId);
                }
            } catch (error) {
                showNotification('Failed to load post data for editing', 'error');
            }
        }

        async function deletePost(postId) {
            if (confirm('Are you sure you want to delete this service request?')) {
                try {
                    showNotification('Deleting post...', 'info');
                    const result = await apiCall(`/posts/${postId}`, 'DELETE');
                    
                    if (result.success) {
                        showNotification('Service request deleted successfully!');
                        loadUserPosts();
                    } else {
                        showNotification(result.message || 'Failed to delete post', 'error');
                    }
                } catch (error) {
                    showNotification('Failed to delete post. Please try again.', 'error');
                    console.error('Delete post error:', error);
                }
            }
        }

        async function rateTechnician(serviceId) {
            const rating = prompt('Rate this service (1-5 stars):');
            if (rating && rating >= 1 && rating <= 5) {
                try {
                    const result = await apiCall('/services/rate', 'POST', { 
                        service_id: serviceId, 
                        rating: parseInt(rating) 
                    });
                    
                    if (result.success) {
                        showNotification('Thank you for rating this service!');
                        loadServiceHistory();
                    } else {
                        showNotification(result.message || 'Failed to submit rating', 'error');
                    }
                } catch (error) {
                    showNotification('Failed to submit rating. Please try again.', 'error');
                }
            }
        }

        // Modal functions
        function viewUserDetails(userId) {
            showNotification('User details functionality will be implemented');
        }

        function viewTechnicianDetails(technicianId) {
            showNotification('Technician profile functionality will be implemented');
        }

        function viewPostDetails(postId) {
            showNotification('Post details functionality will be implemented');
        }

        function viewTaskDetails(taskId) {
            showNotification('Task management functionality will be implemented');
        }

        function closeBidModal() {
            document.getElementById('bid-modal').style.display = 'none';
        }

        function closeServiceModal() {
            document.getElementById('service-modal').style.display = 'none';
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // Chat function
        function toggleChat() {
            showNotification(currentLanguage === 'en' ? 
                'Customer support chat will be available soon. For immediate assistance, call +880 1XXX-XXXXXX' : 
                'গ্রাহক সেবা চ্যাট শীঘ্রই উপলব্ধ হবে। তাৎক্ষণিক সহায়তার জন্য কল করুন +৮৮০ ১XXX-XXXXXX'
            );
        }

        // Notification system
        function showNotification(message, type = 'success') {
            // Remove existing notification
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            const notification = document.createElement('div');
            notification.className = `notification ${type === 'error' ? 'error' : ''}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 4000);
        }

        // Check session on page load
        async function checkSession() {
            try {
                const result = await apiCall('/auth/check-session');
                if (result.success && result.data) {
                    isLoggedIn = true;
                    userData = result.data;
                    updateNavigation();
                }
            } catch (error) {
                console.log('No active session found');
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkSession();
            showSection('home');
            updateNavigation();
            
            // Add animation delay to service cards
            const serviceCards = document.querySelectorAll('.service-card');
            serviceCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.2}s`;
                card.style.opacity = '0';
                card.style.animation = 'fadeInUp 0.6s ease forwards';
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                const navLinks = document.getElementById('navLinks');
                const mobileMenu = document.querySelector('.mobile-menu');
                
                if (navLinks && mobileMenu && !navLinks.contains(event.target) && !mobileMenu.contains(event.target)) {
                    navLinks.classList.remove('active');
                }
            });

            // Close modals when clicking outside
            document.getElementById('bid-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeBidModal();
                }
            });

            document.getElementById('service-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeServiceModal();
                }
            });

            // Handle form submission for editing posts
            document.querySelector('#create-content form').addEventListener('submit', function(e) {
                const postId = e.target.querySelector('button[type="submit"]').getAttribute('data-post-id');
                if (postId) {
                    e.preventDefault();
                    // Handle edit submission
                    handleEditPost(e, postId);
                }
            });
        });

        async function handleEditPost(event, postId) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const data = {
                category: formData.get('category'),
                description: formData.get('description'),
                preferred_time: formData.get('preferredTime'),
                budget: formData.get('budget')
            };
            
            try {
                showNotification('Updating service request...', 'info');
                const result = await apiCall(`/posts/${postId}`, 'PUT', data);
                
                if (result.success) {
                    showNotification('Service request updated successfully!');
                    
                    // Reset form and button
                    const submitBtn = event.target.querySelector('button[type="submit"]');
                    submitBtn.textContent = 'Submit Service Request';
                    submitBtn.removeAttribute('data-post-id');
                    event.target.reset();
                    
                    showDashboardTab('posts');
                } else {
                    showNotification(result.message || 'Failed to update service request', 'error');
                }
            } catch (error) {
                showNotification('Failed to update service request. Please check your connection.', 'error');
                console.error('Edit post error:', error);
            }
        }

        // Add CSS class for admin sections
        const style = document.createElement('style');
        style.textContent = `
            .admin-section {
                display: none;
            }
            .admin-section.active {
                display: block;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>